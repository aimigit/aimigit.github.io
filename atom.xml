<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>埃米的博客</title>
  <subtitle>纳米的十分之一</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://aimigit.github.io/"/>
  <updated>2019-06-25T15:38:52.351Z</updated>
  <id>http://aimigit.github.io/</id>
  
  <author>
    <name>aimigit</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQL创建用户与破解密码</title>
    <link href="http://aimigit.github.io/2019/06/24/mysql-user-password/"/>
    <id>http://aimigit.github.io/2019/06/24/mysql-user-password/</id>
    <published>2019-06-24T15:01:23.000Z</published>
    <updated>2019-06-25T15:38:52.351Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL创建用户与破解密码"><a href="#MySQL创建用户与破解密码" class="headerlink" title="MySQL创建用户与破解密码"></a>MySQL创建用户与破解密码</h1><h2 id="一-创建用户"><a href="#一-创建用户" class="headerlink" title="一. 创建用户"></a>一. 创建用户</h2><p>命令:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'username'</span>@<span class="string">'host'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'password'</span>;</div></pre></td></tr></table></figure></p>
<p>说明：<br>username：你将创建的用户名<br>host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%<br>password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器</p>
<p>例子：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'dog'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123456'</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'pig'</span>@<span class="string">'192.168.1.101_'</span> IDENDIFIED <span class="keyword">BY</span> <span class="string">'123456'</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'pig'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123456'</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'pig'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">''</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'pig'</span>@<span class="string">'%'</span>;</div></pre></td></tr></table></figure></p>
<h2 id="二-授权"><a href="#二-授权" class="headerlink" title="二. 授权:"></a>二. 授权:</h2><p>命令:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">GRANT</span> <span class="keyword">privileges</span> <span class="keyword">ON</span> databasename.tablename <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'host'</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>说明:<br>privileges：用户的操作权限，如SELECT，INSERT，UPDATE等，如果要授予所的权限则使用ALL<br>databasename：数据库名<br>tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用<em>表示，如</em>.*</p>
<p>例子:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> <span class="keyword">ON</span> test.user <span class="keyword">TO</span> <span class="string">'pig'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'pig'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">ON</span> maindataplus.* <span class="keyword">TO</span> <span class="string">'pig'</span>@<span class="string">'%'</span>;</div></pre></td></tr></table></figure></p>
<p>注意:</p>
<p>用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">GRANT</span> <span class="keyword">privileges</span> <span class="keyword">ON</span> databasename.tablename <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'host'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</div></pre></td></tr></table></figure></p>
<h2 id="三-设置与更改用户密码"><a href="#三-设置与更改用户密码" class="headerlink" title="三.设置与更改用户密码"></a>三.设置与更改用户密码</h2><p>命令:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> <span class="string">'username'</span>@<span class="string">'host'</span> = <span class="keyword">PASSWORD</span>(<span class="string">'newpassword'</span>);</div></pre></td></tr></table></figure></p>
<p>如果是当前登陆用户用:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">"newpassword"</span>);</div></pre></td></tr></table></figure></p>
<p>例子:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> <span class="string">'pig'</span>@<span class="string">'%'</span> = <span class="keyword">PASSWORD</span>(<span class="string">"123456"</span>);</div></pre></td></tr></table></figure></p>
<h2 id="四-撤销用户权限"><a href="#四-撤销用户权限" class="headerlink" title="四. 撤销用户权限"></a>四. 撤销用户权限</h2><p>命令:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">REVOKE</span> privilege <span class="keyword">ON</span> databasename.tablename <span class="keyword">FROM</span> <span class="string">'username'</span>@<span class="string">'host'</span>;</div></pre></td></tr></table></figure></p>
<p>说明:</p>
<p>privilege, databasename, tablename：同授权部分<br>例子:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> *.* <span class="keyword">FROM</span> <span class="string">'pig'</span>@<span class="string">'%'</span>;</div></pre></td></tr></table></figure></p>
<p>注意:</p>
<p>假如你在给用户’pig’@’%’授权的时候是这样的（或类似的）：GRANT SELECT ON test.user TO ‘pig’@’%’，则在使用REVOKE SELECT ON <em>.</em> FROM ‘pig’@’%’;命令并不能撤销该用户对test数据库中user表的SELECT 操作。相反，如果授权使用的是GRANT SELECT ON <em>.</em> TO ‘pig’@’%’;则REVOKE SELECT ON test.user FROM ‘pig’@’%’;命令也不能撤销该用户对test数据库中user表的Select权限。</p>
<p>具体信息可以用命令SHOW GRANTS FOR ‘pig’@’%’; 查看。</p>
<h2 id="五-删除用户"><a href="#五-删除用户" class="headerlink" title="五.删除用户"></a>五.删除用户</h2><p>命令:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">'username'</span>@<span class="string">'host'</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p>上面的只是基础，以下才好玩</p>
<h1 id="忘记root密码"><a href="#忘记root密码" class="headerlink" title="忘记root密码"></a>忘记root密码</h1><h2 id="在windows下："><a href="#在windows下：" class="headerlink" title="在windows下："></a>在windows下：</h2><ol>
<li>进入cmd，停止mysql服务：Net stop mysql到mysql的安装路径启动mysql，在bin目录下使用mysqld-nt.exe启动，</li>
<li>执行：mysqld-nt –skip-grant-tables（窗口会一直停止）　　</li>
<li>然后另外打开一个命入令行窗口，执行mysql（或者直接进入Mysql Command Line Cilent），此时无需输入密码即可进入。<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;use mysql</div><div class="line">&gt;update user set password=password("新密码") where user="root";</div><div class="line">&gt;flush privileges;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>4：使用任务管理器，找到mysqld-nt的进程，结束进程!在重新启动mysql-nt服务，就可以用新密码登录了。</p>
<h2 id="在linux下："><a href="#在linux下：" class="headerlink" title="在linux下："></a>在linux下：</h2><ol>
<li>如果 MySQL 正在运行，首先杀之： killall -TERM mysqld。</li>
<li>启动 MySQL ：bin/safe_mysqld –skip-grant-tables &amp;   就可以不需要密码就进入 MySQL 了。<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;use mysql</div><div class="line">&gt;update user set password=password("new_pass") where user="root";</div><div class="line">&gt;flush privileges</div></pre></td></tr></table></figure>
</li>
</ol>
<p>重新杀 MySQL ，用正常方法启动 MySQL 。</p>
<h1 id="破解navicat保存的密码"><a href="#破解navicat保存的密码" class="headerlink" title="破解navicat保存的密码"></a>破解navicat保存的密码</h1><p>不想重置密码，破解navicat保存的星号密码，打开命令行CMD，输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">reg query HKEY_CURRENT_USER\SOFTWARE\PremiumSoft\Navicat\Servers /s /v UserName</div><div class="line"></div><div class="line">reg query HKEY_CURRENT_USER\SOFTWARE\PremiumSoft\Navicat\Servers /s /v <span class="built_in">pwd</span></div></pre></td></tr></table></figure></p>
<p>把对应密码复制到解密工具还原。win10系统环境，测试可用<br>解密工具：navicatpwd.exe<br>下载地址：<a href="https://download.csdn.net/download/victor55555/11256815" target="_blank" rel="external">https://download.csdn.net/download/victor55555/11256815</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;MySQL创建用户与破解密码&quot;&gt;&lt;a href=&quot;#MySQL创建用户与破解密码&quot; class=&quot;headerlink&quot; title=&quot;MySQL创建用户与破解密码&quot;&gt;&lt;/a&gt;MySQL创建用户与破解密码&lt;/h1&gt;&lt;h2 id=&quot;一-创建用户&quot;&gt;&lt;a href=&quot;#一-创建用户&quot; class=&quot;headerlink&quot; title=&quot;一. 创建用户&quot;&gt;&lt;/a&gt;一. 创建用户&lt;/h2&gt;&lt;p&gt;命令:&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;username&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;host&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;password&#39;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;说明：&lt;br&gt;username：你将创建的用户名&lt;br&gt;host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%&lt;br&gt;password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器&lt;/p&gt;
&lt;p&gt;例子：&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;dog&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;localhost&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;123456&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;pig&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;192.168.1.101_&#39;&lt;/span&gt; IDENDIFIED &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;123456&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;pig&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;%&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;123456&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;pig&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;%&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;pig&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;%&#39;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;二-授权&quot;&gt;&lt;a href=&quot;#二-授权&quot; class=&quot;headerlink&quot; title=&quot;二. 授权:&quot;&gt;&lt;/a&gt;二. 授权:&lt;/h2&gt;&lt;p&gt;命令:&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;privileges&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;ON&lt;/span&gt; databasename.tablename &lt;span class=&quot;keyword&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;username&#39;&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&#39;host&#39;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="mysql" scheme="http://aimigit.github.io/tags/mysql/"/>
    
      <category term="密码" scheme="http://aimigit.github.io/tags/%E5%AF%86%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>mysql生成数据字典</title>
    <link href="http://aimigit.github.io/2019/03/27/mysql-table-dic/"/>
    <id>http://aimigit.github.io/2019/03/27/mysql-table-dic/</id>
    <published>2019-03-27T11:56:30.000Z</published>
    <updated>2019-03-27T11:59:48.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mysql生成数据字典"><a href="#mysql生成数据字典" class="headerlink" title="mysql生成数据字典"></a>mysql生成数据字典</h2><p>通过information_schema 读取数据库信息<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span></div><div class="line">	C.TABLE_NAME <span class="keyword">AS</span> <span class="string">'表'</span>,</div><div class="line">	T.TABLE_COMMENT <span class="keyword">AS</span> <span class="string">'表名'</span>,</div><div class="line">	C.COLUMN_NAME <span class="keyword">AS</span> <span class="string">'字段名'</span>,</div><div class="line">	C.COLUMN_TYPE <span class="keyword">AS</span> <span class="string">'数据类型'</span>,</div><div class="line">	C.COLUMN_COMMENT <span class="keyword">AS</span> <span class="string">'字段说明'</span>,</div><div class="line">	C.IS_NULLABLE <span class="keyword">AS</span> <span class="string">'允许为空'</span>,</div><div class="line">	C.COLUMN_KEY <span class="keyword">AS</span> <span class="string">'键'</span></div><div class="line"><span class="keyword">FROM</span></div><div class="line">	information_schema.COLUMNS C</div><div class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> information_schema.TABLES T <span class="keyword">ON</span> C.TABLE_SCHEMA = T.TABLE_SCHEMA</div><div class="line"><span class="keyword">AND</span> C.TABLE_NAME = T.TABLE_NAME</div><div class="line"><span class="keyword">WHERE</span></div><div class="line">	T.TABLE_SCHEMA = <span class="string">'数据库名'</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;mysql生成数据字典&quot;&gt;&lt;a href=&quot;#mysql生成数据字典&quot; class=&quot;headerlink&quot; title=&quot;mysql生成数据字典&quot;&gt;&lt;/a&gt;mysql生成数据字典&lt;/h2&gt;&lt;p&gt;通过information_schema 读取数据库信息&lt;br&gt;&lt;f
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="mysql" scheme="http://aimigit.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>centos7 安装java环境</title>
    <link href="http://aimigit.github.io/2019/02/01/centos-java-env/"/>
    <id>http://aimigit.github.io/2019/02/01/centos-java-env/</id>
    <published>2019-02-01T08:38:49.000Z</published>
    <updated>2019-02-01T09:27:38.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="tar方式安装JDK"><a href="#tar方式安装JDK" class="headerlink" title="tar方式安装JDK"></a>tar方式安装JDK</h2><p>在服务器用wget一直下载失败。<br>官网下载jdk1.8，<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br>下载后上传到服务器<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#查看服务器java</span></div><div class="line">java version</div><div class="line"></div><div class="line"><span class="comment">#解压</span></div><div class="line">tar -zxvf jdk-8u202-linux-x64.tar.gz -C /usr/<span class="built_in">local</span>/jdk1.8.0_202</div><div class="line"></div><div class="line"><span class="comment">#配置环境变量</span></div><div class="line">vim /etc/profile</div><div class="line"><span class="comment">#向文件里面追加以下内容：</span></div><div class="line"><span class="comment">#set java environment</span></div><div class="line">JAVA_HOME=/usr/java/jdk1.8.0_152</div><div class="line">JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</div><div class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin</div><div class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JRE_HOME</span>/lib</div><div class="line"><span class="built_in">export</span> JAVA_HOME JRE_HOME PATH CLASSPATH</div><div class="line"></div><div class="line"><span class="comment">#使配置文件生效</span></div><div class="line"><span class="built_in">source</span> /etc/profile</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="rpm方式安装mysql"><a href="#rpm方式安装mysql" class="headerlink" title="rpm方式安装mysql"></a>rpm方式安装mysql</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#下载mysql5.7</span></div><div class="line">wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</div><div class="line"><span class="comment">#rpm方式安装</span></div><div class="line">rpm -ivh mysql57-community-release-el7-11.noarch.rpm </div><div class="line">yum install mysql-community-server</div><div class="line"><span class="comment">#一路y</span></div><div class="line"><span class="comment">#安装完成，重启mysql</span></div><div class="line">service mysqld restart</div><div class="line"><span class="comment">#第一次没有密码登入</span></div><div class="line">mysql -u root</div><div class="line"><span class="comment">#设置密码</span></div><div class="line"><span class="built_in">set</span> password <span class="keyword">for</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> =password(<span class="string">'password'</span>);</div><div class="line"><span class="comment">#安装完成</span></div></pre></td></tr></table></figure>
<h4 id="打开远程登入"><a href="#打开远程登入" class="headerlink" title="打开远程登入"></a>打开远程登入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#登入</span></div><div class="line">mysql -u root -p</div><div class="line"><span class="comment">#输入密码</span></div><div class="line"><span class="comment">#切换库</span></div><div class="line">use mysql</div><div class="line"><span class="comment">#查看用户</span></div><div class="line">select host,user,authentication_string from user;</div><div class="line"><span class="comment">#情况1，授权已有账号</span></div><div class="line">grant all privileges on *.* to root@<span class="string">'%'</span>identified by <span class="string">'password'</span>;</div><div class="line"><span class="comment">#情况2，创建新账号</span></div><div class="line">create user <span class="string">'username'</span>@<span class="string">'%'</span> identified by <span class="string">'password'</span>;</div><div class="line"><span class="comment">#刷新权限</span></div><div class="line">flush privileges;</div></pre></td></tr></table></figure>
<h4 id="修改账号密码"><a href="#修改账号密码" class="headerlink" title="修改账号密码"></a>修改账号密码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">修改密码</span></div><div class="line">update user set authentication_string=password("新密码") where user="root";</div></pre></td></tr></table></figure>
<h2 id="安装tomcat"><a href="#安装tomcat" class="headerlink" title="安装tomcat"></a>安装tomcat</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">下载tomcat</span></div><div class="line">wget http://mirror.bit.edu.cn/apache/tomcat/tomcat-9/v9.0.14/bin/apache-tomcat-9.0.14.tar.gz</div><div class="line"><span class="meta">#</span><span class="bash">解压</span></div><div class="line">tar -zxvf apache-tomcat-9.0.14.tar.gz</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;tar方式安装JDK&quot;&gt;&lt;a href=&quot;#tar方式安装JDK&quot; class=&quot;headerlink&quot; title=&quot;tar方式安装JDK&quot;&gt;&lt;/a&gt;tar方式安装JDK&lt;/h2&gt;&lt;p&gt;在服务器用wget一直下载失败。&lt;br&gt;官网下载jdk1.8，&lt;a href=&quot;https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&lt;/a&gt;&lt;br&gt;下载后上传到服务器&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看服务器java&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java version&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#解压&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tar -zxvf jdk-8u202-linux-x64.tar.gz -C /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/jdk1.8.0_202&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#配置环境变量&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vim /etc/profile&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#向文件里面追加以下内容：&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#set java environment&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;JAVA_HOME=/usr/java/jdk1.8.0_152&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;JRE_HOME=&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/jre&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin:&lt;span class=&quot;variable&quot;&gt;$JRE_HOME&lt;/span&gt;/bin&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;CLASSPATH=.:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/dt.jar:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/tools.jar:&lt;span class=&quot;variable&quot;&gt;$JRE_HOME&lt;/span&gt;/lib&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; JAVA_HOME JRE_HOME PATH CLASSPATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#使配置文件生效&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="java" scheme="http://aimigit.github.io/tags/java/"/>
    
      <category term="linux" scheme="http://aimigit.github.io/tags/linux/"/>
    
      <category term="mysql" scheme="http://aimigit.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>js-for循环遍历</title>
    <link href="http://aimigit.github.io/2019/01/10/js-for/"/>
    <id>http://aimigit.github.io/2019/01/10/js-for/</id>
    <published>2019-01-10T11:41:51.000Z</published>
    <updated>2019-01-10T12:07:47.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="for…in"><a href="#for…in" class="headerlink" title="for…in"></a>for…in</h2><p>以任意顺序遍历一个对象的可枚举属性。对于每个不同的属性，语句都会被执行。<br>for..in 不应该被用来迭代一个下标顺序很重要的 Array .<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;;</div><div class="line"><span class="keyword">var</span> obj2 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj1) &#123;</div><div class="line">  <span class="built_in">console</span>.log( key + <span class="string">" = "</span> + obj1[key]);</div><div class="line">&#125;</div><div class="line"><span class="comment">/*a = 1</span></div><div class="line"><span class="comment">  b = 2 </span></div><div class="line"><span class="comment">  c = 3 */</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj1) &#123;</div><div class="line">  <span class="built_in">console</span>.log( key + <span class="string">" = "</span> + obj1[key]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*0 = a </span></div><div class="line"><span class="comment">  1 = b </span></div><div class="line"><span class="comment">  2 = c */</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h4 id="小demo"><a href="#小demo" class="headerlink" title="小demo"></a>小demo</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取数组key</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getObjectKeys</span>(<span class="params">object</span>)</span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="keyword">var</span> keys = [];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> property <span class="keyword">in</span> object)</div><div class="line">      keys.push(property);</div><div class="line">    <span class="keyword">return</span> keys;</div><div class="line">&#125;</div><div class="line"><span class="comment">//获取数组value</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getObjectValues</span>(<span class="params">object</span>)</span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="keyword">var</span> values = [];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> property <span class="keyword">in</span> object)</div><div class="line">      values.push(object[property]);</div><div class="line">    <span class="keyword">return</span> values;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><p>常见的语法<br>用于创建一个循环,它包含了三个可选的表达式,三个可选的表达式包围在圆括号中并由分号分隔,后面跟随一个语句或一组语句在循环中执行.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> ([initialization]; [condition]; [final-expression])</div><div class="line">   statement</div></pre></td></tr></table></figure></p>
<p>小例子<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</div><div class="line">   <span class="built_in">console</span>.log(i);</div><div class="line">   <span class="comment">// more statements</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (; i &lt; <span class="number">9</span>; i++) &#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">    <span class="comment">// more statements</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>;; i++) &#123;</div><div class="line">   <span class="built_in">console</span>.log(i);</div><div class="line">   <span class="keyword">if</span> (i &gt; <span class="number">3</span>) <span class="keyword">break</span>;</div><div class="line">   <span class="comment">// more statements</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h2><p>forEach() 方法对数组的每个元素执行一次提供的函数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">array.forEach(callback(currentValue, index, array)&#123;</div><div class="line">    <span class="comment">//do something</span></div><div class="line">&#125;, <span class="keyword">this</span>)</div><div class="line"></div><div class="line">array.forEach(callback[, thisArg])</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"></div><div class="line">a.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(element);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="jquery-each"><a href="#jquery-each" class="headerlink" title="jquery $.each"></a>jquery $.each</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$.each([ <span class="number">52</span>, <span class="number">97</span> ], <span class="function"><span class="keyword">function</span>(<span class="params"> index, value </span>) </span>&#123;</div><div class="line">  alert( index + <span class="string">": "</span> + value );</div><div class="line">&#125;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  <span class="string">"flammable"</span>: <span class="string">"inflammable"</span>,</div><div class="line">  <span class="string">"duh"</span>: <span class="string">"no duh"</span></div><div class="line">&#125;;</div><div class="line">$.each( obj, <span class="function"><span class="keyword">function</span>(<span class="params"> key, value </span>) </span>&#123;</div><div class="line">  alert( key + <span class="string">": "</span> + value );</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="jquery-each-dom"><a href="#jquery-each-dom" class="headerlink" title="jquery $.each dom"></a>jquery $.each dom</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$.each($(<span class="string">"input:hidden"</span>), <span class="function"><span class="keyword">function</span>(<span class="params">i,val</span>)</span>&#123;  </div><div class="line">     alert(val);</div><div class="line">     alert(i);</div><div class="line">     alert(val.name);</div><div class="line">     alert(val.value);   </div><div class="line"> &#125;); </div><div class="line"></div><div class="line"> $(<span class="string">"input:hidden"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i,val</span>)</span>&#123;  <span class="comment">//第一个参数表示索引下标，第二个参数表示当前索引元素</span></div><div class="line">    alert(i);</div><div class="line">    alert(val.name);</div><div class="line">    alert(val.value);       </div><div class="line">&#125;);</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;for…in&quot;&gt;&lt;a href=&quot;#for…in&quot; class=&quot;headerlink&quot; title=&quot;for…in&quot;&gt;&lt;/a&gt;for…in&lt;/h2&gt;&lt;p&gt;以任意顺序遍历一个对象的可枚举属性。对于每个不同的属性，语句都会被执行。&lt;br&gt;for..in 不应该被用来迭代一个下标顺序很重要的 Array .&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; obj1 = &amp;#123;&lt;span class=&quot;attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;attr&quot;&gt;b&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; obj2 = [&lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;b&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;c&#39;&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; key &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; obj1) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log( key + &lt;span class=&quot;string&quot;&gt;&quot; = &quot;&lt;/span&gt; + obj1[key]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*a = 1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;  b = 2 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;  c = 3 */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; key &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; obj1) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log( key + &lt;span class=&quot;string&quot;&gt;&quot; = &quot;&lt;/span&gt; + obj1[key]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*0 = a &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;  1 = b &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;  2 = c */&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="js" scheme="http://aimigit.github.io/tags/js/"/>
    
      <category term="json" scheme="http://aimigit.github.io/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>js-json对象和字符串转换</title>
    <link href="http://aimigit.github.io/2019/01/09/js-json-object/"/>
    <id>http://aimigit.github.io/2019/01/09/js-json-object/</id>
    <published>2019-01-09T03:17:56.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="json简介"><a href="#json简介" class="headerlink" title="json简介"></a>json简介</h2><p>json是一种数据格式，不管java，php，python，object-c语言都支持，所以用来跨平台数据交互，app端，web端，小程序等等通过服务端API接口返回json数据。xml格式几乎很少见到了。</p>
<p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。</p>
<h3 id="JSON两种结构："><a href="#JSON两种结构：" class="headerlink" title="JSON两种结构："></a>JSON两种结构：</h3><p>官网：<a href="http://www.json.org/json-zh.html" target="_blank" rel="external">http://www.json.org/json-zh.html</a></p>
<ul>
<li>“名称/值”对的集合（A collection of name/value pairs）。不同的语言中，它被理解为对象（object），纪录（record），结构（struct），字典（dictionary），哈希表（hash table），有键列表（keyed list），或者关联数组 （associative array）。</li>
<li>值的有序列表（An ordered list of values）。在大部分语言中，它被理解为数组（array）。</li>
</ul>
<p><img src="http://www.json.org/object.gif" width="60%" height="60%"></p>
<a id="more"></a>
<h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><h3 id="js-字符串转对象"><a href="#js-字符串转对象" class="headerlink" title="js 字符串转对象"></a>js 字符串转对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//方法1</span></div><div class="line"><span class="built_in">JSON</span>.parse(jsonstr)；</div><div class="line"><span class="comment">//Jquery 方法</span></div><div class="line">$.parseJSON( jsonstr)</div><div class="line"><span class="comment">//方法3</span></div><div class="line">　<span class="built_in">eval</span>(<span class="string">'('</span> + jsonstr + <span class="string">')'</span>);（不推荐，会执行代码）</div></pre></td></tr></table></figure>
<h3 id="js-对象转字符串"><a href="#js-对象转字符串" class="headerlink" title="js 对象转字符串"></a>js 对象转字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//方法1</span></div><div class="line"><span class="built_in">JSON</span>.stringify(jsonobj)；</div><div class="line"><span class="comment">//方法2</span></div><div class="line">obj.toJSONString()</div></pre></td></tr></table></figure>
<h3 id="js构造对象小Demo"><a href="#js构造对象小Demo" class="headerlink" title="js构造对象小Demo"></a>js构造对象小Demo</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveAsObject</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">var</span> data = [];</div><div class="line">				<span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">				person1.name=<span class="string">"张三"</span>;</div><div class="line">				person1.age=<span class="number">18</span>;</div><div class="line">				person1.sex=<span class="string">"男"</span>;</div><div class="line">				data.push(person1);</div><div class="line">				</div><div class="line">				<span class="keyword">var</span> person2 = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">				person2.name=<span class="string">"小丽"</span>;</div><div class="line">				person2.age=<span class="number">20</span>;</div><div class="line">				person2.sex=<span class="string">"女"</span>;</div><div class="line">				data.push(person2);</div><div class="line">			</div><div class="line">				<span class="keyword">var</span> json_str = <span class="built_in">JSON</span>.stringify(data);</div><div class="line">				<span class="keyword">var</span> cc = jQuery.parseJSON(json_str);</div><div class="line">				$.each(cc, <span class="function"><span class="keyword">function</span>(<span class="params">index,item</span>) </span>&#123;</div><div class="line">					<span class="built_in">console</span>.log(item)</div><div class="line">				&#125;);</div><div class="line">			&#125;</div></pre></td></tr></table></figure>
<h2 id="java"><a href="#java" class="headerlink" title="java"></a>java</h2><h3 id="json字符串转对象"><a href="#json字符串转对象" class="headerlink" title="json字符串转对象"></a>json字符串转对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1、使用JSONObject</span></div><div class="line">JSONObject jsonObject=JSONObject.fromObject(jsonStr);</div><div class="line">Student stu=(Student)JSONObject.toBean(jsonStr, Student.class);</div><div class="line"></div><div class="line"><span class="comment">//2、使用JSONArray</span></div><div class="line">JSONArray jsonArray=JSONArray.fromObject(jsonStr);</div></pre></td></tr></table></figure>
<h3 id="对象转json字符串"><a href="#对象转json字符串" class="headerlink" title="对象转json字符串"></a>对象转json字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1、使用JSONObject</span></div><div class="line">JSONObject listObject=JSONObject.fromObject(obj);</div><div class="line"><span class="comment">//2、使用JSONArray</span></div><div class="line">JSONArray listArray=JSONArray.fromObject(obj);</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;json简介&quot;&gt;&lt;a href=&quot;#json简介&quot; class=&quot;headerlink&quot; title=&quot;json简介&quot;&gt;&lt;/a&gt;json简介&lt;/h2&gt;&lt;p&gt;json是一种数据格式，不管java，php，python，object-c语言都支持，所以用来跨平台数据交互，app端，web端，小程序等等通过服务端API接口返回json数据。xml格式几乎很少见到了。&lt;/p&gt;
&lt;p&gt;JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。&lt;/p&gt;
&lt;h3 id=&quot;JSON两种结构：&quot;&gt;&lt;a href=&quot;#JSON两种结构：&quot; class=&quot;headerlink&quot; title=&quot;JSON两种结构：&quot;&gt;&lt;/a&gt;JSON两种结构：&lt;/h3&gt;&lt;p&gt;官网：&lt;a href=&quot;http://www.json.org/json-zh.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.json.org/json-zh.html&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“名称/值”对的集合（A collection of name/value pairs）。不同的语言中，它被理解为对象（object），纪录（record），结构（struct），字典（dictionary），哈希表（hash table），有键列表（keyed list），或者关联数组 （associative array）。&lt;/li&gt;
&lt;li&gt;值的有序列表（An ordered list of values）。在大部分语言中，它被理解为数组（array）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://www.json.org/object.gif&quot; width=&quot;60%&quot; height=&quot;60%&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="js" scheme="http://aimigit.github.io/tags/js/"/>
    
      <category term="json" scheme="http://aimigit.github.io/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>js浏览器全屏和时钟方法</title>
    <link href="http://aimigit.github.io/2019/01/09/js-full-screen/"/>
    <id>http://aimigit.github.io/2019/01/09/js-full-screen/</id>
    <published>2019-01-09T02:46:55.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="js浏览器全屏方法"><a href="#js浏览器全屏方法" class="headerlink" title="js浏览器全屏方法"></a>js浏览器全屏方法</h2><p>浏览器F11全屏展示，js代码自动全屏，浏览器会认为有安全问题，所以要放个按钮触发，<br>在Chrome,Firefox,IE11测试通过。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//全屏</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fullscreen</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> el = <span class="built_in">document</span>.documentElement;</div><div class="line">  <span class="keyword">var</span> isFullscreen=<span class="built_in">document</span>.fullScreen||<span class="built_in">document</span>.mozFullScreen||<span class="built_in">document</span>.webkitIsFullScreen;</div><div class="line">  <span class="keyword">if</span>(!isFullscreen)&#123;<span class="comment">//进入全屏,多重短路表达式</span></div><div class="line">	  (el.requestFullscreen&amp;&amp;el.requestFullscreen())||</div><div class="line">	  (el.mozRequestFullScreen&amp;&amp;el.mozRequestFullScreen())||</div><div class="line">	  (el.webkitRequestFullscreen&amp;&amp;el.webkitRequestFullscreen())||(el.msRequestFullscreen&amp;&amp;el.msRequestFullscreen());</div><div class="line">  &#125;<span class="keyword">else</span>&#123; <span class="comment">//退出全屏,三目运算符</span></div><div class="line">	  <span class="built_in">document</span>.exitFullscreen?<span class="built_in">document</span>.exitFullscreen():</div><div class="line">	  <span class="built_in">document</span>.mozCancelFullScreen?<span class="built_in">document</span>.mozCancelFullScreen():</div><div class="line">	  <span class="built_in">document</span>.webkitExitFullscreen?<span class="built_in">document</span>.webkitExitFullscreen():<span class="string">''</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//调用</span></div><div class="line">$(<span class="string">".fullScreen"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		fullscreen();</div><div class="line">	&#125;);</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="IE问题"><a href="#IE问题" class="headerlink" title="IE问题"></a>IE问题</h3><p>在页面加入样式解决<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>&#123;<span class="attribute">width</span>: <span class="number">100%</span>;&#125;</div></pre></td></tr></table></figure></p>
<h2 id="js时钟方法"><a href="#js时钟方法" class="headerlink" title="js时钟方法"></a>js时钟方法</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**时间*/</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clock</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//在月份、日期、小时等小于10前面补0</span></div><div class="line">	<span class="keyword">var</span> padDate = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> value &lt; <span class="number">10</span> ? <span class="string">'0'</span> + value : value;</div><div class="line">	&#125;;</div><div class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">	<span class="keyword">var</span> year = date.getFullYear();</div><div class="line">	<span class="keyword">var</span> month = padDate(date.getMonth() + <span class="number">1</span>);</div><div class="line">	<span class="keyword">var</span> da = padDate(date.getDate());</div><div class="line">	<span class="keyword">var</span> day = date.getDay(); <span class="comment">//获取当前星期几   </span></div><div class="line">	<span class="keyword">var</span> h = padDate(date.getHours());</div><div class="line">	<span class="keyword">var</span> m = padDate(date.getMinutes());</div><div class="line">	<span class="keyword">var</span> s = padDate(date.getSeconds());</div><div class="line">	<span class="keyword">var</span> vWeek = [ <span class="string">"星期天"</span>, <span class="string">"星期一"</span>, <span class="string">"星期二"</span>, <span class="string">"星期三"</span>, <span class="string">"星期四"</span>, <span class="string">"星期五"</span>,<span class="string">"星期六"</span> ];</div><div class="line">	<span class="keyword">var</span> fullTime = year + <span class="string">'.'</span> + month + <span class="string">'.'</span> + da  + <span class="string">' '</span> + h + <span class="string">':'</span></div><div class="line">			+ m + <span class="string">':'</span> + s + <span class="string">' '</span> + vWeek[day];</div><div class="line">  $(<span class="string">".time"</span>).html(fullTime);</div><div class="line">&#125;</div><div class="line"><span class="comment">//调用，1秒刷新一次</span></div><div class="line">	setInterval(clock,<span class="number">1000</span>);</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;js浏览器全屏方法&quot;&gt;&lt;a href=&quot;#js浏览器全屏方法&quot; class=&quot;headerlink&quot; title=&quot;js浏览器全屏方法&quot;&gt;&lt;/a&gt;js浏览器全屏方法&lt;/h2&gt;&lt;p&gt;浏览器F11全屏展示，js代码自动全屏，浏览器会认为有安全问题，所以要放个按钮触发，&lt;br&gt;在Chrome,Firefox,IE11测试通过。&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//全屏&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;fullscreen&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; el = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.documentElement;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; isFullscreen=&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.fullScreen||&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.mozFullScreen||&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.webkitIsFullScreen;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!isFullscreen)&amp;#123;&lt;span class=&quot;comment&quot;&gt;//进入全屏,多重短路表达式&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	  (el.requestFullscreen&amp;amp;&amp;amp;el.requestFullscreen())||&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	  (el.mozRequestFullScreen&amp;amp;&amp;amp;el.mozRequestFullScreen())||&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	  (el.webkitRequestFullscreen&amp;amp;&amp;amp;el.webkitRequestFullscreen())||(el.msRequestFullscreen&amp;amp;&amp;amp;el.msRequestFullscreen());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123; &lt;span class=&quot;comment&quot;&gt;//退出全屏,三目运算符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	  &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.exitFullscreen?&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.exitFullscreen():&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	  &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.mozCancelFullScreen?&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.mozCancelFullScreen():&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	  &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.webkitExitFullscreen?&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.webkitExitFullscreen():&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//调用&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$(&lt;span class=&quot;string&quot;&gt;&quot;.fullScreen&quot;&lt;/span&gt;).click(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		fullscreen();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="js" scheme="http://aimigit.github.io/tags/js/"/>
    
      <category term="json" scheme="http://aimigit.github.io/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>aria2下载神器常用命令</title>
    <link href="http://aimigit.github.io/2018/12/27/aria2-command/"/>
    <id>http://aimigit.github.io/2018/12/27/aria2-command/</id>
    <published>2018-12-27T03:12:49.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="aria2简介"><a href="#aria2简介" class="headerlink" title="aria2简介"></a>aria2简介</h2><p>Aria2是一款免费开源跨平台且不限速的多线程下载软件，Aria2的优点是速度快、体积小、资源占用少；支持 HTTP / FTP / BT / Magnet 磁力链接等类型的文件下载；支持 Win、Mac、Linux系统，甚至在树莓派、NAS、路由器等设备上都能安装它。强大的地方，结合第三方插件，可以扩展，下载百度网盘等资源，居家下片必备神器。<br>官网：<a href="https://aria2.github.io" target="_blank" rel="external">https://aria2.github.io</a></p>
<a id="more"></a>
<h2 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h2><p>使用 aria2c -h 或man aria2c查看帮助文档，官方文档：<a href="https://aria2.github.io/manual/en/html/aria2c.html" target="_blank" rel="external">https://aria2.github.io/manual/en/html/aria2c.html</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div></pre></td><td class="code"><pre><div class="line">Usage: aria2c [OPTIONS] [URI | MAGNET | TORRENT_FILE | METALINK_FILE]...</div><div class="line">Printing options tagged with '#basic'.</div><div class="line">See 'aria2c -h#help' to know all available tags.</div><div class="line">Options:</div><div class="line"> -v, --version                Print the version number and exit.</div><div class="line"></div><div class="line">                              Tags: #basic</div><div class="line"></div><div class="line"> -h, --help[=TAG|KEYWORD]     Print usage and exit.</div><div class="line">                              The help messages are classified with tags. A tag</div><div class="line">                              starts with "#". For example, type "--help=#http"</div><div class="line">                              to get the usage for the options tagged with</div><div class="line">                              "#http". If non-tag word is given, print the usage</div><div class="line">                              for the options whose name includes that word.</div><div class="line"></div><div class="line">                              Possible Values: #basic, #advanced, #http, #https, #ftp, #metalink, #bittorrent, #cookie, #hook, #file, #rpc, #checksum, #experimental, #deprecated, #help, #all</div><div class="line">                              Default: #basic</div><div class="line">                              Tags: #basic, #help</div><div class="line"></div><div class="line"> -l, --log=LOG                The file name of the log file. If '-' is</div><div class="line">                              specified, log is written to stdout.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/file, -</div><div class="line">                              Tags: #basic</div><div class="line"></div><div class="line"> -d, --dir=DIR                The directory to store the downloaded file.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/directory</div><div class="line">                              Default: D:\Program Files\aria2-1.34.0</div><div class="line">                              Tags: #basic, #file</div><div class="line"></div><div class="line"> -o, --out=FILE               The file name of the downloaded file. It is</div><div class="line">                              always relative to the directory given in -d</div><div class="line">                              option. When the -Z option is used, this option</div><div class="line">                              will be ignored.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/file</div><div class="line">                              Tags: #basic, #http, #ftp, #file</div><div class="line"></div><div class="line"> -s, --split=N                Download a file using N connections. If more</div><div class="line">                              than N URIs are given, first N URIs are used and</div><div class="line">                              remaining URLs are used for backup. If less than</div><div class="line">                              N URIs are given, those URLs are used more than</div><div class="line">                              once so that N connections total are made</div><div class="line">                              simultaneously. The number of connections to the</div><div class="line">                              same host is restricted by the </div><div class="line">                              --max-connection-per-server option. See also the</div><div class="line">                              --min-split-size option.</div><div class="line"></div><div class="line">                              Possible Values: 1-*</div><div class="line">                              Default: 5</div><div class="line">                              Tags: #basic, #http, #ftp</div><div class="line"></div><div class="line"> --file-allocation=METHOD     Specify file allocation method.</div><div class="line">                              'none' doesn't pre-allocate file space. 'prealloc'</div><div class="line">                              pre-allocates file space before download begins.</div><div class="line">                              This may take some time depending on the size of</div><div class="line">                              the file.</div><div class="line">                              If you are using newer file systems such as ext4</div><div class="line">                              (with extents support), btrfs, xfs or NTFS</div><div class="line">                              (MinGW build only), 'falloc' is your best</div><div class="line">                              choice. It allocates large(few GiB) files</div><div class="line">                              almost instantly. Don't use 'falloc' with legacy</div><div class="line">                              file systems such as ext3 and FAT32 because it</div><div class="line">                              takes almost same time as 'prealloc' and it</div><div class="line">                              blocks aria2 entirely until allocation finishes.</div><div class="line">                              'falloc' may not be available if your system</div><div class="line">                              doesn't have posix_fallocate() function.</div><div class="line">                              'trunc' uses ftruncate() system call or</div><div class="line">                              platform-specific counterpart to truncate a file</div><div class="line">                              to a specified length.</div><div class="line"></div><div class="line">                              Possible Values: none, prealloc, trunc, falloc</div><div class="line">                              Default: prealloc</div><div class="line">                              Tags: #basic, #file</div><div class="line"></div><div class="line"> -V, --check-integrity[=true|false] Check file integrity by validating piece</div><div class="line">                              hashes or a hash of entire file. This option has</div><div class="line">                              effect only in BitTorrent, Metalink downloads</div><div class="line">                              with checksums or HTTP(S)/FTP downloads with</div><div class="line">                              --checksum option. If piece hashes are provided,</div><div class="line">                              this option can detect damaged portions of a file</div><div class="line">                              and re-download them. If a hash of entire file is</div><div class="line">                              provided, hash check is only done when file has</div><div class="line">                              been already download. This is determined by file</div><div class="line">                              length. If hash check fails, file is</div><div class="line">                              re-downloaded from scratch. If both piece hashes</div><div class="line">                              and a hash of entire file are provided, only</div><div class="line">                              piece hashes are used.</div><div class="line"></div><div class="line">                              Possible Values: true, false</div><div class="line">                              Default: false</div><div class="line">                              Tags: #basic, #metalink, #bittorrent, #file, #checksum</div><div class="line"></div><div class="line"> -c, --continue[=true|false]  Continue downloading a partially downloaded</div><div class="line">                              file. Use this option to resume a download</div><div class="line">                              started by a web browser or another program</div><div class="line">                              which downloads files sequentially from the</div><div class="line">                              beginning. Currently this option is only</div><div class="line">                              applicable to http(s)/ftp downloads.</div><div class="line"></div><div class="line">                              Possible Values: true, false</div><div class="line">                              Default: false</div><div class="line">                              Tags: #basic, #http, #ftp</div><div class="line"></div><div class="line"> -i, --input-file=FILE        Downloads URIs found in FILE. You can specify</div><div class="line">                              multiple URIs for a single entity: separate</div><div class="line">                              URIs on a single line using the TAB character.</div><div class="line">                              Reads input from stdin when '-' is specified.</div><div class="line">                              Additionally, options can be specified after each</div><div class="line">                              line of URI. This optional line must start with</div><div class="line">                              one or more white spaces and have one option per</div><div class="line">                              single line. See INPUT FILE section of man page</div><div class="line">                              for details. See also --deferred-input option.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/file, -</div><div class="line">                              Tags: #basic</div><div class="line"></div><div class="line"> -j, --max-concurrent-downloads=N Set maximum number of parallel downloads for</div><div class="line">                              every static (HTTP/FTP) URL, torrent and metalink.</div><div class="line">                              See also --split and --optimize-concurrent-downloads options.</div><div class="line"></div><div class="line">                              Possible Values: 1-*</div><div class="line">                              Default: 5</div><div class="line">                              Tags: #basic</div><div class="line"></div><div class="line"> -Z, --force-sequential[=true|false] Fetch URIs in the command-line sequentially</div><div class="line">                              and download each URI in a separate session, like</div><div class="line">                              the usual command-line download utilities.</div><div class="line"></div><div class="line">                              Possible Values: true, false</div><div class="line">                              Default: false</div><div class="line">                              Tags: #basic</div><div class="line"></div><div class="line"> -x, --max-connection-per-server=NUM The maximum number of connections to one</div><div class="line">                              server for each download.</div><div class="line"></div><div class="line">                              Possible Values: 1-16</div><div class="line">                              Default: 1</div><div class="line">                              Tags: #basic, #http, #ftp</div><div class="line"></div><div class="line"> -k, --min-split-size=SIZE    aria2 does not split less than 2*SIZE byte range.</div><div class="line">                              For example, let's consider downloading 20MiB</div><div class="line">                              file. If SIZE is 10M, aria2 can split file into 2</div><div class="line">                              range [0-10MiB) and [10MiB-20MiB) and download it</div><div class="line">                              using 2 sources(if --split &gt;= 2, of course).</div><div class="line">                              If SIZE is 15M, since 2*15M &gt; 20MiB, aria2 does</div><div class="line">                              not split file and download it using 1 source.</div><div class="line">                              You can append K or M(1K = 1024, 1M = 1024K).</div><div class="line"></div><div class="line">                              Possible Values: 1048576-1073741824</div><div class="line">                              Default: 20M</div><div class="line">                              Tags: #basic, #http, #ftp</div><div class="line"></div><div class="line"> --ftp-user=USER              Set FTP user. This affects all URLs.</div><div class="line"></div><div class="line">                              Tags: #basic, #ftp</div><div class="line"></div><div class="line"> --ftp-passwd=PASSWD          Set FTP password. This affects all URLs.</div><div class="line"></div><div class="line">                              Tags: #basic, #ftp</div><div class="line"></div><div class="line"> --http-user=USER             Set HTTP user. This affects all URLs.</div><div class="line"></div><div class="line">                              Tags: #basic, #http</div><div class="line"></div><div class="line"> --http-passwd=PASSWD         Set HTTP password. This affects all URLs.</div><div class="line"></div><div class="line">                              Tags: #basic, #http</div><div class="line"></div><div class="line"> --load-cookies=FILE          Load Cookies from FILE using the Firefox3 format</div><div class="line">                              and Mozilla/Firefox(1.x/2.x)/Netscape format.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/file</div><div class="line">                              Tags: #basic, #http, #cookie</div><div class="line"></div><div class="line"> -S, --show-files[=true|false] Print file listing of .torrent, .meta4 and</div><div class="line">                              .metalink file and exit. More detailed</div><div class="line">                              information will be listed in case of torrent</div><div class="line">                              file.</div><div class="line"></div><div class="line">                              Possible Values: true, false</div><div class="line">                              Default: false</div><div class="line">                              Tags: #basic, #metalink, #bittorrent</div><div class="line"></div><div class="line"> --max-overall-upload-limit=SPEED Set max overall upload speed in bytes/sec.</div><div class="line">                              0 means unrestricted.</div><div class="line">                              You can append K or M(1K = 1024, 1M = 1024K).</div><div class="line">                              To limit the upload speed per torrent, use</div><div class="line">                              --max-upload-limit option.</div><div class="line"></div><div class="line">                              Possible Values: 0-*</div><div class="line">                              Default: 0</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> -u, --max-upload-limit=SPEED Set max upload speed per each torrent in</div><div class="line">                              bytes/sec. 0 means unrestricted.</div><div class="line">                              You can append K or M(1K = 1024, 1M = 1024K).</div><div class="line">                              To limit the overall upload speed, use</div><div class="line">                              --max-overall-upload-limit option.</div><div class="line"></div><div class="line">                              Possible Values: 0-*</div><div class="line">                              Default: 0</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> -T, --torrent-file=TORRENT_FILE  The path to the .torrent file.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/file</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> --listen-port=PORT...        Set TCP port number for BitTorrent downloads.</div><div class="line">                              Multiple ports can be specified by using ',',</div><div class="line">                              for example: "6881,6885". You can also use '-'</div><div class="line">                              to specify a range: "6881-6999". ',' and '-' can</div><div class="line">                              be used together.</div><div class="line"></div><div class="line">                              Possible Values: 1024-65535</div><div class="line">                              Default: 6881-6999</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> --enable-dht[=true|false]    Enable IPv4 DHT functionality. It also enables</div><div class="line">                              UDP tracker support. If a private flag is set</div><div class="line">                              in a torrent, aria2 doesn't use DHT for that</div><div class="line">                              download even if ``true`` is given.</div><div class="line"></div><div class="line">                              Possible Values: true, false</div><div class="line">                              Default: true</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> --dht-listen-port=PORT...    Set UDP listening port used by DHT(IPv4, IPv6)</div><div class="line">                              and UDP tracker. Multiple ports can be specified</div><div class="line">                              by using ',', for example: "6881,6885". You can</div><div class="line">                              also use '-' to specify a range: "6881-6999".</div><div class="line">                              ',' and '-' can be used together.</div><div class="line"></div><div class="line">                              Possible Values: 1024-65535</div><div class="line">                              Default: 6881-6999</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> --enable-dht6[=true|false]   Enable IPv6 DHT functionality.</div><div class="line">                              Use --dht-listen-port option to specify port</div><div class="line">                              number to listen on. See also --dht-listen-addr6</div><div class="line">                              option.</div><div class="line"></div><div class="line">                              Possible Values: true, false</div><div class="line">                              Default: false</div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> --dht-listen-addr6=ADDR      Specify address to bind socket for IPv6 DHT. </div><div class="line">                              It should be a global unicast IPv6 address of the</div><div class="line">                              host.</div><div class="line"></div><div class="line">                              Tags: #basic, #bittorrent</div><div class="line"></div><div class="line"> -M, --metalink-file=METALINK_FILE The file path to the .meta4 and .metalink</div><div class="line">                              file. Reads input from stdin when '-' is</div><div class="line">                              specified.</div><div class="line"></div><div class="line">                              Possible Values: /path/to/file, -</div><div class="line">                              Tags: #basic, #metalink</div><div class="line"></div><div class="line">URI, MAGNET, TORRENT_FILE, METALINK_FILE:</div><div class="line"> You can specify multiple HTTP(S)/FTP URIs. Unless you specify -Z option, all</div><div class="line"> URIs must point to the same file or downloading will fail.</div><div class="line"> You can also specify arbitrary number of BitTorrent Magnet URIs, torrent/</div><div class="line"> metalink files stored in a local drive. Please note that they are always</div><div class="line"> treated as a separate download.</div><div class="line"></div><div class="line"> You can specify both torrent file with -T option and URIs. By doing this,</div><div class="line"> download a file from both torrent swarm and HTTP/FTP server at the same time,</div><div class="line"> while the data from HTTP/FTP are uploaded to the torrent swarm. For single file</div><div class="line"> torrents, URI can be a complete URI pointing to the resource or if URI ends</div><div class="line"> with '/', 'name' in torrent file is added. For multi-file torrents, 'name' and</div><div class="line"> 'path' in torrent are added to form a URI for each file.</div><div class="line"></div><div class="line"> Make sure that URI is quoted with single(') or double(") quotation if it</div><div class="line"> contains "&amp;" or any characters that have special meaning in shell.</div><div class="line"></div><div class="line">About the number of connections</div><div class="line"> Since 1.10.0 release, aria2 uses 1 connection per host by default and has 20MiB</div><div class="line"> segment size restriction. So whatever value you specify using -s option, it</div><div class="line"> uses 1 connection per host. To make it behave like 1.9.x, use</div><div class="line"> --max-connection-per-server=4 --min-split-size=1M.</div><div class="line"></div><div class="line">Refer to man page for more information.</div></pre></td></tr></table></figure></p>
<h2 id="使用例子"><a href="#使用例子" class="headerlink" title="使用例子"></a>使用例子</h2><p>一般使用使用 aria2 下载文件，只需在命令后附加地址即可。比如我们下载QQ如：</p>
<p>aria2c <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>如果需要重命名的话加上–out或者-o参数</p>
<p>aria2c –out=QQ <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>aria2c -o QQ <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>分段下载利用 aria2 的分段下载功能可以加快文件的下载速度，对于下载大文件时特别有用。为了使用 aria2 的分段下载功能，你需要在命令中指定 x 选项。如：</p>
<p>aria2c -x 2 <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>-x配合-s 和-j可更好使用如:</p>
<p>aria2c -s 2 -x 2 -j 10 <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>这将使用 2 个连接来下载该文件。s 后面的参数值介于 1~5 之间，你可以根据实际情况选择。</p>
<p>PS：-s这个参数的意思是使用几个线程进行下载，-x是最大使用几个线程下载，-j就是同时下载几个文件。（这个是我的理解对不对不清楚）<br>断点续传在命令中使用 c 选项可以断点续传文件。如：</p>
<p>aria2c -c <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>验证文件是否正确：</p>
<p>有的时候为了确认下载的文件时候正确或是否被人修改需要验证md5码，这里可以使用一下命令</p>
<p>aria2c -c -x16 -s20 -j20 –checksum=md5=xxxxxxxxxxxxx <a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a></p>
<p>其中md5可以修改成你需要的校检方法，后面的xxxxx改成正确的校检码。</p>
<p>高级篇</p>
<p>bt下载</p>
<p>aria2c ‘xxx.torrnet‘</p>
<p>aria2c ‘磁力链接’</p>
<p>列出种子内容</p>
<p>aria2c -S target.torrent</p>
<p>下载种子内编号为 1、4、5、6、7 的文件</p>
<p>aria2c –select-file=1,4-7 target.torrent</p>
<p>设置bt端口</p>
<p>aria2c –listen-port=51413 ‘xxx.torrent’</p>
<p>设置dht端口</p>
<p>aria2c –dht-listen-port=51413 ‘xxx.torrent’</p>
<p>有的文件下载是需要引用页，我们可以这样输入如</p>
<p>aria2c –referer=<a href="http://im.qq.com/qq/2011/" target="_blank" rel="external">http://im.qq.com/qq/2011/</a> ‘<a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a>‘</p>
<p>有时我们需要错误信息时要加上–log如</p>
<p>aria2c –log=xxx –referer=<a href="http://im.qq.com/qq/2011/" target="_blank" rel="external">http://im.qq.com/qq/2011/</a>  ‘<a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a>‘</p>
<p>限速下载</p>
<p>单个文件最大下载速度： aria2c –max-download-limit=300K -s10 -x10 -j10 ‘<a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a>‘</p>
<p>整体下载最大速度：aria2c –max-overall-download-limit=300k -s10 -x10 -j10 ‘<a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe</a>‘</p>
<p>下载需要cookie验证的文件</p>
<p>aria2c –header=“Cookie:cookie名称=cookie内容“ ‘<a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe‘" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe‘</a></p>
<p>或</p>
<p>aria2c –load-cookies=cookie文件 ‘<a href="http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe‘" target="_blank" rel="external">http://dl_dir.qq.com/qqfile/qq/QQ2011/QQ2011.exe‘</a></p>
<p>其中cookie文件需要自己手动导出，导出方法为chrome用户需使用此扩展，firefox需使用此扩展，使用扩展导出离线页面cookie命名为cookie_text</p>
<p>当然这样使用很麻烦所以我们可以通过alias来进行简化：</p>
<p>alias xunlei=’aria2c -s 6 -c –load-cookies=/home/user/cookie_text’（Ubuntu系统需要把此命令添加进.bashrc文件中）</p>
<p>以后使用需要此cookies时只要使用下面命令即可</p>
<p>xunlei “下载链接” -o xxx</p>
<h2 id="第三方资源"><a href="#第三方资源" class="headerlink" title="第三方资源"></a>第三方资源</h2><h3 id="不习惯用命令行的，可以结合UI界面插件"><a href="#不习惯用命令行的，可以结合UI界面插件" class="headerlink" title="不习惯用命令行的，可以结合UI界面插件"></a>不习惯用命令行的，可以结合UI界面插件</h3><p>Aria2 Web UI：<a href="https://ziahamza.github.io/webui-aria2/" target="_blank" rel="external">https://ziahamza.github.io/webui-aria2/</a><br>YAAW：<a href="http://binux.github.io/yaaw/demo/" target="_blank" rel="external">http://binux.github.io/yaaw/demo/</a></p>
<h3 id="下载百度网盘插件BaiduExporter"><a href="#下载百度网盘插件BaiduExporter" class="headerlink" title="下载百度网盘插件BaiduExporter"></a>下载百度网盘插件BaiduExporter</h3><p>Chrome Extension：<a href="https://chrome.google.com/webstore/detail/mjaenbjdjmgolhoafkohbhhbaiedbkno" target="_blank" rel="external">https://chrome.google.com/webstore/detail/mjaenbjdjmgolhoafkohbhhbaiedbkno</a><br>Firefox Addons：<a href="https://github.com/acgotaku/BaiduExporter" target="_blank" rel="external">https://github.com/acgotaku/BaiduExporter</a><br>UserScript：<a href="https://greasyfork.org/scripts/294-baidupandownloadhelper" target="_blank" rel="external">https://greasyfork.org/scripts/294-baidupandownloadhelper</a></p>
<h3 id="旋风离线"><a href="#旋风离线" class="headerlink" title="旋风离线"></a>旋风离线</h3><p>UserScript：<a href="https://github.com/binux/ThunderLixianExporter" target="_blank" rel="external">https://github.com/binux/ThunderLixianExporter</a></p>
<h3 id="迅雷离线（需会员账号）"><a href="#迅雷离线（需会员账号）" class="headerlink" title="迅雷离线（需会员账号）"></a>迅雷离线（需会员账号）</h3><p>UserScript:<a href="https://github.com/binux/ThunderLixianExporter" target="_blank" rel="external">https://github.com/binux/ThunderLixianExporter</a></p>
<h3 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h3><p>结合RPC方式，扩展路由器，NAS等设备，你可以在公司上班，控制家里设备下载电影，回家就能看，各种玩法，有空介绍。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;aria2简介&quot;&gt;&lt;a href=&quot;#aria2简介&quot; class=&quot;headerlink&quot; title=&quot;aria2简介&quot;&gt;&lt;/a&gt;aria2简介&lt;/h2&gt;&lt;p&gt;Aria2是一款免费开源跨平台且不限速的多线程下载软件，Aria2的优点是速度快、体积小、资源占用少；支持 HTTP / FTP / BT / Magnet 磁力链接等类型的文件下载；支持 Win、Mac、Linux系统，甚至在树莓派、NAS、路由器等设备上都能安装它。强大的地方，结合第三方插件，可以扩展，下载百度网盘等资源，居家下片必备神器。&lt;br&gt;官网：&lt;a href=&quot;https://aria2.github.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://aria2.github.io&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="生活" scheme="http://aimigit.github.io/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="aria2" scheme="http://aimigit.github.io/tags/aria2/"/>
    
  </entry>
  
  <entry>
    <title>mybatis打印sql语句</title>
    <link href="http://aimigit.github.io/2018/12/26/mybatis-showsql/"/>
    <id>http://aimigit.github.io/2018/12/26/mybatis-showsql/</id>
    <published>2018-12-26T10:59:21.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="springmvc-配置方式"><a href="#springmvc-配置方式" class="headerlink" title="springmvc 配置方式"></a>springmvc 配置方式</h2><p>在mybatis-config.xml中配置加一个setting<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE configuration</span></div><div class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></div><div class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 打印查询语句 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>在sqlSessionFactory配置好configLocation属性,引入mybatis-config.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE configuration   </span></div><div class="line"><span class="meta">    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"  </span></div><div class="line"><span class="meta">    "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 打印查询语句 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="comment">&lt;!-- mapper已经在spring-mybatis.xml中的sqlSessionFactory配置，这里不再需要配置 --&gt;</span></div><div class="line"><span class="comment">&lt;!--     &lt;mappers&gt; --&gt;</span></div><div class="line"><span class="comment">&lt;!--         &lt;mapper resource="com/a/b/c/dao/BusinessInfoDaoMapper.xml" /&gt; --&gt;</span></div><div class="line"><span class="comment">&lt;!--     &lt;/mappers&gt; --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="springboot-配置方式"><a href="#springboot-配置方式" class="headerlink" title="springboot 配置方式"></a>springboot 配置方式</h2><p>在application.yml（.properties）中增加配置，在控制台打印sql：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mybatis</div><div class="line">  configuration:</div><div class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;springmvc-配置方式&quot;&gt;&lt;a href=&quot;#springmvc-配置方式&quot; class=&quot;headerlink&quot; title=&quot;springmvc 配置方式&quot;&gt;&lt;/a&gt;springmvc 配置方式&lt;/h2&gt;&lt;p&gt;在mybatis-config.xml中配置加一个setting&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;!DOCTYPE configuration&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;settings&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 打印查询语句 --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;setting&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;logImpl&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;STDOUT_LOGGING&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;settings&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="java" scheme="http://aimigit.github.io/tags/java/"/>
    
      <category term="mybatis" scheme="http://aimigit.github.io/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>log4j2+Slf4j日志配置文件</title>
    <link href="http://aimigit.github.io/2018/11/30/log4j2/"/>
    <id>http://aimigit.github.io/2018/11/30/log4j2/</id>
    <published>2018-11-30T02:47:00.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="log4j简介"><a href="#log4j简介" class="headerlink" title="log4j简介"></a>log4j简介</h2><p>log4j是java常见的日志输出框架，<br>2015年5月，Apache宣布Log4J 1.x 停止更新。最新版为1.2.17。<br>如今，Log4J 2.x已更新至2.11。<br>官方网址：<a href="http://logging.apache.org/log4j/2.x/" target="_blank" rel="external">http://logging.apache.org/log4j/2.x/</a></p>
<h2 id="配置文件介绍"><a href="#配置文件介绍" class="headerlink" title="配置文件介绍"></a>配置文件介绍</h2><h3 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h3><p>trace：追踪，就是程序推进一下，可以写个trace输出</p>
<p>debug：调试，一般作为最低级别，trace基本不用。</p>
<p>info：输出重要的信息，使用较多</p>
<p>warn：警告，有些信息不是错误信息，但也要给程序员一些提示。</p>
<p>error：错误信息。用的也很多。</p>
<p>fatal：致命错误。级别较高，这种级别不用调试了，重写吧……</p>
<p>机制：如果一条日志信息的级别大于等于配置文件的级别，就记录。</p>
<h3 id="输出源"><a href="#输出源" class="headerlink" title="输出源"></a>输出源</h3><p>CONSOLE（输出到控制台）、FILE（输出到文件）等。</p>
<a id="more"></a>
<h3 id="布局方式"><a href="#布局方式" class="headerlink" title="布局方式"></a>布局方式</h3><p>SimpleLayout：以简单的形式显示</p>
<p>HTMLLayout：以HTML表格显示</p>
<p>PatternLayout：自定义形式显示</p>
<p>在Log4J2中基本采用PatternLayout自定义日志布局。</p>
<p>自定义格式：</p>
<p>%t：线程名称</p>
<p>%p：日志级别</p>
<p>%c：日志消息所在类名</p>
<p>%m：消息内容</p>
<p>%M：输出执行方法</p>
<p>%d：发生时间，%d{yyyy-MM-dd HH:mm:ss,SSS}，输出类似：2011-10-18 22:10:28,921</p>
<p>%x: 输出和当前线程相关联的NDC(嵌套诊断环境),尤其用到像java servlets这样的多客户多线程的应用中。</p>
<p>%L：代码中的行数</p>
<p>%n：换行</p>
<h2 id="maven-pom-xml引入包"><a href="#maven-pom-xml引入包" class="headerlink" title="maven pom.xml引入包"></a>maven pom.xml引入包</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>2.11.0<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">activiti.version</span>&gt;</span>6.0.0<span class="tag">&lt;/<span class="name">activiti.version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 日志：Log4j2 + Slf4j --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 桥接：告诉Slf4j使用Log4j2 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-slf4j-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 桥接：告诉commons logging使用Log4j2 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-jcl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="log4j2-xml文件"><a href="#log4j2-xml文件" class="headerlink" title="log4j2.xml文件"></a>log4j2.xml文件</h2><p>2.x版本不支持properties格式，使用xml或者json或者yaml， log4j2xml 添加src/main/resources 目录<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">"OFF"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">Properties</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 配置日志文件输出目录，此配置将日志输出到tomcat根目录下的指定文件夹 --&gt;</span> </div><div class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"LOG_HOME"</span>&gt;</span>$&#123;sys:catalina.home&#125;/logs<span class="tag">&lt;/<span class="name">Property</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></div><div class="line">	</div><div class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!--只接受程序中DEBUG级别的日志进行处理--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss.SSS&#125;] %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--处理DEBUG级别的日志，并把该日志放到logs/debug.log文件中--&gt;</span></div><div class="line">        <span class="comment">&lt;!--打印出DEBUG级别日志，每次大小超过size，则这size大小的日志会自动存入按年份-月份建立的文件夹下面并进行压缩，作为存档--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileDebug"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/platform-debug.log"</span></span></div><div class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/$$&#123;date:yyyy-MM&#125;/platform-debug-%d&#123;yyyy-MM-dd&#125;-%i.log.gz"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"INFO"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span></span></div><div class="line"><span class="tag">                    <span class="attr">pattern</span>=<span class="string">"[%d&#123;yyyy-MM-dd HH:mm:ss&#125;] %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"10 MB"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--处理INFO级别的日志，并把该日志放到logs/info.log文件中--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileInfo"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/platform-info.log"</span></span></div><div class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/$$&#123;date:yyyy-MM&#125;/platform-info-%d&#123;yyyy-MM-dd&#125;-%i.log.gz"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!--只接受INFO级别的日志，其余的全部拒绝处理--&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"INFO"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"WARN"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span></span></div><div class="line"><span class="tag">                    <span class="attr">pattern</span>=<span class="string">"[%d&#123;yyyy-MM-dd HH:mm:ss&#125;] %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"10 MB"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--处理WARN级别的日志，并把该日志放到logs/warn.log文件中--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileWarn"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/platform-warn.log"</span></span></div><div class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/$$&#123;date:yyyy-MM&#125;/platform-warn-%d&#123;yyyy-MM-dd&#125;-%i.log.gz"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"WARN"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"ERROR"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span></span></div><div class="line"><span class="tag">                    <span class="attr">pattern</span>=<span class="string">"[%d&#123;yyyy-MM-dd HH:mm:ss&#125;] %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"10 MB"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--处理error级别的日志，并把该日志放到logs/error.log文件中--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileError"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/platform-error.log"</span></span></div><div class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/$$&#123;date:yyyy-MM&#125;/platform-error-%d&#123;yyyy-MM-dd&#125;-%i.log.gz"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"ERROR"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span></span></div><div class="line"><span class="tag">                    <span class="attr">pattern</span>=<span class="string">"[%d&#123;yyyy-MM-dd HH:mm:ss&#125;] %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"10 MB"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--druid的日志记录追加器--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"druidSqlRollingFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;LOG_HOME&#125;/platform-druid-sql.log"</span></span></div><div class="line"><span class="tag">                     <span class="attr">filePattern</span>=<span class="string">"$&#123;LOG_HOME&#125;/$$&#123;date:yyyy-MM&#125;/platform-druid-sql-%d&#123;yyyy-MM-dd&#125;-%i.log.gz"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;yyyy-MM-dd HH:mm:ss&#125;] %-5level %L %M - %msg%xEx%n"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"10 MB"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileInfo"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileWarn"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileError"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileDebug"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--记录druid-sql的记录--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"druid.sql.Statement"</span> <span class="attr">level</span>=<span class="string">"debug"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"druidSqlRollingFile"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!--log4j2 自带过滤日志--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.apache.catalina.startup.DigesterFactory"</span> <span class="attr">level</span>=<span class="string">"error"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.apache.catalina.util.LifecycleBase"</span> <span class="attr">level</span>=<span class="string">"error"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.apache.coyote.http11.Http11NioProtocol"</span> <span class="attr">level</span>=<span class="string">"warn"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.apache.sshd.common.util.SecurityUtils"</span> <span class="attr">level</span>=<span class="string">"warn"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.apache.tomcat.util.net.NioSelectorPool"</span> <span class="attr">level</span>=<span class="string">"warn"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.crsh.plugin"</span> <span class="attr">level</span>=<span class="string">"warn"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.crsh.ssh"</span> <span class="attr">level</span>=<span class="string">"warn"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.eclipse.jetty.util.component.AbstractLifeCycle"</span> <span class="attr">level</span>=<span class="string">"error"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"org.hibernate.validator.internal.util.Version"</span> <span class="attr">level</span>=<span class="string">"warn"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework.boot.actuate.autoconfigure.CrshAutoConfiguration"</span> <span class="attr">level</span>=<span class="string">"warn"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework.boot.actuate.endpoint.jmx"</span> <span class="attr">level</span>=<span class="string">"warn"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;log4j简介&quot;&gt;&lt;a href=&quot;#log4j简介&quot; class=&quot;headerlink&quot; title=&quot;log4j简介&quot;&gt;&lt;/a&gt;log4j简介&lt;/h2&gt;&lt;p&gt;log4j是java常见的日志输出框架，&lt;br&gt;2015年5月，Apache宣布Log4J 1.x 停止更新。最新版为1.2.17。&lt;br&gt;如今，Log4J 2.x已更新至2.11。&lt;br&gt;官方网址：&lt;a href=&quot;http://logging.apache.org/log4j/2.x/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://logging.apache.org/log4j/2.x/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;配置文件介绍&quot;&gt;&lt;a href=&quot;#配置文件介绍&quot; class=&quot;headerlink&quot; title=&quot;配置文件介绍&quot;&gt;&lt;/a&gt;配置文件介绍&lt;/h2&gt;&lt;h3 id=&quot;日志级别&quot;&gt;&lt;a href=&quot;#日志级别&quot; class=&quot;headerlink&quot; title=&quot;日志级别&quot;&gt;&lt;/a&gt;日志级别&lt;/h3&gt;&lt;p&gt;trace：追踪，就是程序推进一下，可以写个trace输出&lt;/p&gt;
&lt;p&gt;debug：调试，一般作为最低级别，trace基本不用。&lt;/p&gt;
&lt;p&gt;info：输出重要的信息，使用较多&lt;/p&gt;
&lt;p&gt;warn：警告，有些信息不是错误信息，但也要给程序员一些提示。&lt;/p&gt;
&lt;p&gt;error：错误信息。用的也很多。&lt;/p&gt;
&lt;p&gt;fatal：致命错误。级别较高，这种级别不用调试了，重写吧……&lt;/p&gt;
&lt;p&gt;机制：如果一条日志信息的级别大于等于配置文件的级别，就记录。&lt;/p&gt;
&lt;h3 id=&quot;输出源&quot;&gt;&lt;a href=&quot;#输出源&quot; class=&quot;headerlink&quot; title=&quot;输出源&quot;&gt;&lt;/a&gt;输出源&lt;/h3&gt;&lt;p&gt;CONSOLE（输出到控制台）、FILE（输出到文件）等。&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="java" scheme="http://aimigit.github.io/tags/java/"/>
    
      <category term="log4j2" scheme="http://aimigit.github.io/tags/log4j2/"/>
    
  </entry>
  
  <entry>
    <title>一些常用插件</title>
    <link href="http://aimigit.github.io/2018/09/04/some-plugin/"/>
    <id>http://aimigit.github.io/2018/09/04/some-plugin/</id>
    <published>2018-09-04T06:45:58.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="eclipse插件"><a href="#eclipse插件" class="headerlink" title="eclipse插件"></a>eclipse插件</h2><p>Decompiler |java反编译插件<br>Properties |Editor 中文配置文件插件<br>Darkest Dark Theme|黑色主题<br>Subclipse |svn插件</p>
<h2 id="chrome插件"><a href="#chrome插件" class="headerlink" title="chrome插件"></a>chrome插件</h2><p>uBlock Origin |广告拦截<br>Restlet Client |REST请求测试工具<br>Tampermonkey|油猴脚本管理<br>Chrono下载管理器|下载管理<br>Dark Reader|黑色主题<br>WebRTC Control|关闭WebRTC</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;eclipse插件&quot;&gt;&lt;a href=&quot;#eclipse插件&quot; class=&quot;headerlink&quot; title=&quot;eclipse插件&quot;&gt;&lt;/a&gt;eclipse插件&lt;/h2&gt;&lt;p&gt;Decompiler |java反编译插件&lt;br&gt;Properties |Edito
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="插件" scheme="http://aimigit.github.io/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>多机更新 Hexo 博客</title>
    <link href="http://aimigit.github.io/2018/09/04/hexo-multi-pc/"/>
    <id>http://aimigit.github.io/2018/09/04/hexo-multi-pc/</id>
    <published>2018-09-04T06:21:52.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-动手前的思考"><a href="#1-动手前的思考" class="headerlink" title="1. 动手前的思考"></a>1. 动手前的思考</h2><p>还是按照我个人的老习惯，在动手前，先来理清思路，看看我们大概需要做哪些操作，为什么要做这些？这篇文章默认读者已经在另外一台电脑上部署好了，现在只是需要在另外一台电脑上部署。如果读者关注的只是如何使用 Hexo + Github Pages 搭建自己的博客，可以移步我之前的一篇文章 《知行合一 | 用 Hexo 搭建博客》。</p>
<p>既然博客的生产环境是 Hexo + Github Pages，那么重部署的工作就围绕着 Hexo 和 Github Pages 展开。回顾一下，两者在我们搭建博客的时候具体扮演着什么角色。</p>
<p>Hexo：是一个静态博客生成器，根据给定的主题，负责把写好的 Markdown 文章转换成一堆 HTML + CSS + Javascript 页面。另外，Hexo 还有把生成好的站点上传到 Github Pages 的功能。<br>Github Pages：这是我们的网站内容（那一堆 HTML + CSS + Javascript）真正存放的地方。<br>Hexo 是把 Markdown 转换成 HTML 的，那么首先，需要给 Hexo 提供 Markdown 文件。由于，我希望打开任何一台电脑都能更新最新的容，Hexo 博客的内容应该放到一个同步盘的文件夹下面，坚果云、Dropbox、OneDrive 这些都行。其次，Hexo 是基于 Node.js 的，但笔记本上完全没有 Node.js 环境，所以需要安装 Node.js。还有，很多文章都会用到类似 hexo-katex 这样的插件，新电脑上也没安装，需要安装这些必须的插件。</p>
<p>对于 Github Pages，最大的问题在于告诉 Github 服务器，这次的提交更改不是别人，也是由我做出的，所以一定要接受我的改动。在《知行合一 | 用 Hexo 搭建博客》中我已经讲过了，这个身份认证是由 SSH Key 来完成的，在重新部署中，我们还是要弄这个。</p>
<a id="more"></a>
<h2 id="2-重部署流程"><a href="#2-重部署流程" class="headerlink" title="2. 重部署流程"></a>2. 重部署流程</h2><p>2.1 文件同步<br>要把整一个 your_name.github.io 文件夹同步过来，里面包含的 .gitignore 等文件包含了等下要提交的文件对应哪个 repo 等的信息，还有</p>
<p>2.2 Hexo 配置<br>因为笔记本上完全没有 Hexo 环境，所以我们还要重新部署下，根据《知行合一 | 用 Hexo 搭建博客》步骤大体如下。</p>
<p>先安装 Node.js 和 Git，再安装完这两者后，再打开 Node.js command prompt 安装 Hexo。但由于 Node.js 官方的源安装速度非常慢，我们先将源改成国内淘宝的镜像，执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">npm config <span class="built_in">set</span> registry <span class="string">"https://registry.npm.taobao.org"</span></div><div class="line"><span class="built_in">cd</span> 到同步的 your_name.github.io 内， 然后再安装 Hexo：</div><div class="line"></div><div class="line"></div><div class="line">npm install -g hexo-cli</div><div class="line">安装完后，可以对比下新电脑里your_name.github.io 文件夹下面的 package.json 里面的插件和老电脑里的package.json 插件列表有什么不同，把缺的插件统统装一遍就可以了。这个就需要在同步前，也就是在敲npm install -g hexo-cli 前就把老电脑里的插件信息另存为。可惜我当时没想到这一点，不过我就额外安装过 Noise 主题和 hexo-katex 插件，所以根据我另外一篇文章 《Hexo 博客支持 KaTeX（回炉版）》，还需要执行如下命令：</div><div class="line"></div><div class="line">npm install hexo-renderer-pandoc --save</div><div class="line">npm install hexo-katex --save</div><div class="line">由于 hexo-renderer-pandoc 插件会调用 pandoc，所以还需要先去下载安装 Padoc。为了 Noise 主题，执行</div><div class="line"></div><div class="line">npm install hexo-renderer-jade --save</div><div class="line">npm install hexo-renderer-less --save</div><div class="line">为了部署，还要执行</div><div class="line"></div><div class="line">npm install hexo-deployer-git --save</div><div class="line">至此，在新的平台上运行 hexo clean，hexo generate ，hexo server 等命令应该就没有问题了。</div><div class="line"></div><div class="line">2.3 Github 配置</div><div class="line">这一环节，其实同《知行合一 | 用 Hexo 搭建博客》一样，唯一的差别就是省去了创建 repo 这一环节，因为我们的 repo 是同步过来的。具体步骤如下，更详细的解释可以看《知行合一 | 用 Hexo 搭建博客》一文：</div><div class="line"></div><div class="line">Step 1：Setting up Git。在 Git Bash 中执行如下代码即可：</div><div class="line"></div><div class="line">git config --global user.name <span class="string">"YOUR NAME"</span></div><div class="line">git config --global user.email <span class="string">"YOUR EMAIL ADDRESS"</span></div><div class="line">其中，YOUR NAME 是自己取的名字，YOUR EMAIL ADDRESS 是自己的 Github 邮箱。</div><div class="line"></div><div class="line">Step 2：Authenticating with GitHub from Git。</div><div class="line"></div><div class="line">在 Git Bash 下执行如下命令，生成 SSH key</div><div class="line"></div><div class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">"your_email@example.com"</span></div><div class="line">其中，your_email@example.com 是你的 Github 注册邮箱，剩下的一路回车即可。</div><div class="line"></div><div class="line">将 SSH key 添加到 ssh-agent</div><div class="line"></div><div class="line">在 Git Bash 下执行如下命令，开启 ssh-agent</div><div class="line"></div><div class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></div><div class="line">将这个 SSH key 添加到 ssh-agent 里去</div><div class="line"></div><div class="line">ssh-add ~/.ssh/id_rsa</div><div class="line">将 SSH key 添加到 Github 账户</div><div class="line"></div><div class="line">在 Git Bash 中将 SSH Key 拷贝出来：</div><div class="line"></div><div class="line">clip &lt; ~/.ssh/id_rsa.pub</div><div class="line">此时，SSH Key 已经在我们的剪切板里了。然后登录 Github 帐号，依次点击自己的头像，Settings，SSH and GPG keys， Add SSH key， 在 Title 这里输入 Key 的label，比如 your_name - PC，然后在 Key 里面把 SSH Key 粘贴进去，点击 Add SSH key 大功告成。</div><div class="line"></div><div class="line">测试 SSH 连接，在 Git Bash 中敲入</div><div class="line"></div><div class="line">ssh -T git@github.com</div><div class="line">应该可以看到提示你成功的信息。</div><div class="line"></div><div class="line">Hexo 部署：*执行hexo deploy 应该就可以大功告成了。</div></pre></td></tr></table></figure>
<h2 id="3-动手后的再思考"><a href="#3-动手后的再思考" class="headerlink" title="3. 动手后的再思考"></a>3. 动手后的再思考</h2><p>这篇文章写到这里，发现写的内容基本都是上一篇《知行合一 | 用 Hexo 搭建博客》内容的重复，也就是说多台电脑同时更新的问题，并不是一个完全不同的问题，绝大部分其实都是可以复用的。最初，让我困惑的并不是这些操作步骤，而是如何正确的刨分这个问题，哪些是我熟悉的，哪些是我陌生的。其实，这篇文章主要想讲两点：</p>
<p>仅仅将那些插件文件同步，并不等于安装了那些插件，所以我们才需要在新电脑上安装 hexo-katex 等插件；<br>只要将新电脑的 SSH key 添加到 Github 的项目里面，就通过了身份认证。</p>
<p>原文网址：<a href="http://lowrank.science/Hexo-Migration/" target="_blank" rel="external">http://lowrank.science/Hexo-Migration/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-动手前的思考&quot;&gt;&lt;a href=&quot;#1-动手前的思考&quot; class=&quot;headerlink&quot; title=&quot;1. 动手前的思考&quot;&gt;&lt;/a&gt;1. 动手前的思考&lt;/h2&gt;&lt;p&gt;还是按照我个人的老习惯，在动手前，先来理清思路，看看我们大概需要做哪些操作，为什么要做这些？这篇文章默认读者已经在另外一台电脑上部署好了，现在只是需要在另外一台电脑上部署。如果读者关注的只是如何使用 Hexo + Github Pages 搭建自己的博客，可以移步我之前的一篇文章 《知行合一 | 用 Hexo 搭建博客》。&lt;/p&gt;
&lt;p&gt;既然博客的生产环境是 Hexo + Github Pages，那么重部署的工作就围绕着 Hexo 和 Github Pages 展开。回顾一下，两者在我们搭建博客的时候具体扮演着什么角色。&lt;/p&gt;
&lt;p&gt;Hexo：是一个静态博客生成器，根据给定的主题，负责把写好的 Markdown 文章转换成一堆 HTML + CSS + Javascript 页面。另外，Hexo 还有把生成好的站点上传到 Github Pages 的功能。&lt;br&gt;Github Pages：这是我们的网站内容（那一堆 HTML + CSS + Javascript）真正存放的地方。&lt;br&gt;Hexo 是把 Markdown 转换成 HTML 的，那么首先，需要给 Hexo 提供 Markdown 文件。由于，我希望打开任何一台电脑都能更新最新的容，Hexo 博客的内容应该放到一个同步盘的文件夹下面，坚果云、Dropbox、OneDrive 这些都行。其次，Hexo 是基于 Node.js 的，但笔记本上完全没有 Node.js 环境，所以需要安装 Node.js。还有，很多文章都会用到类似 hexo-katex 这样的插件，新电脑上也没安装，需要安装这些必须的插件。&lt;/p&gt;
&lt;p&gt;对于 Github Pages，最大的问题在于告诉 Github 服务器，这次的提交更改不是别人，也是由我做出的，所以一定要接受我的改动。在《知行合一 | 用 Hexo 搭建博客》中我已经讲过了，这个身份认证是由 SSH Key 来完成的，在重新部署中，我们还是要弄这个。&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="hexo" scheme="http://aimigit.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>mysql_存储过程游标的使用</title>
    <link href="http://aimigit.github.io/2018/06/13/mysql-cursor-proc/"/>
    <id>http://aimigit.github.io/2018/06/13/mysql-cursor-proc/</id>
    <published>2018-06-13T08:11:03.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>为了处理老数据，从一张父表，两张子表复制数据。涉及到生成id关联以及子表多条记录复制，使用了存储过程，cursor遍历结果集。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2>  <a id="more"></a>    
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  <span class="comment">-- 时间变量</span></div><div class="line">	<span class="keyword">DECLARE</span> c_time <span class="keyword">timestamp</span>;</div><div class="line">  <span class="comment">-- uuid变量</span></div><div class="line">  <span class="keyword">DECLARE</span> uid <span class="built_in">VARCHAR</span>(<span class="number">32</span>);</div><div class="line">  <span class="comment">-- 老id变量</span></div><div class="line">  <span class="keyword">DECLARE</span> <span class="keyword">oid</span> <span class="built_in">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="string">'A10E2C8C7F00000101776C9B37E79999'</span> ;</div><div class="line">	<span class="comment">-- 临时id</span></div><div class="line">	<span class="keyword">DECLARE</span> temp_id <span class="built_in">VARCHAR</span>(<span class="number">32</span>);</div><div class="line">  <span class="comment">-- 游标结束标记变量</span></div><div class="line">  <span class="keyword">DECLARE</span> s <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="comment">-- api_funny_img结果集</span></div><div class="line">  <span class="keyword">DECLARE</span> cursor_img <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> </div><div class="line">		<span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> api_funny_img <span class="keyword">WHERE</span> funny_id=<span class="keyword">oid</span>;</div><div class="line">	<span class="comment">-- cursor_word</span></div><div class="line">  <span class="keyword">DECLARE</span> cursor_word <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> </div><div class="line">		<span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> api_funny_word <span class="keyword">WHERE</span> funny_id=<span class="keyword">oid</span>;</div><div class="line">  <span class="comment">-- 游标结束标记</span></div><div class="line">  <span class="keyword">DECLARE</span> CONTINUE <span class="keyword">HANDLER</span> <span class="keyword">FOR</span> <span class="keyword">SQLSTATE</span> <span class="string">'02000'</span> <span class="keyword">SET</span> s=<span class="number">1</span>;</div><div class="line">  </div><div class="line">	<span class="keyword">DECLARE</span> <span class="keyword">EXIT</span> <span class="keyword">HANDLER</span> <span class="keyword">FOR</span> SQLEXCEPTION <span class="keyword">ROLLBACK</span>;</div><div class="line">  <span class="comment">-- 参数</span></div><div class="line"> </div><div class="line">  <span class="keyword">SELECT</span> <span class="keyword">NOW</span>() <span class="keyword">INTO</span> c_time;</div><div class="line">  <span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="keyword">REPLACE</span>(<span class="keyword">UUID</span>(),<span class="string">"-"</span>,<span class="string">""</span>)) <span class="keyword">INTO</span> uid;</div><div class="line">	<span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</div><div class="line">  <span class="comment">-- 主表</span></div><div class="line">  <span class="keyword">SELECT</span> uid;</div><div class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> api_funny(<span class="keyword">id</span>,type_id,f_name,<span class="keyword">sequence</span>,icon,img,create_time,is_pure,<span class="string">`online`</span>,show_type)</div><div class="line">    <span class="keyword">SELECT</span> uid,type_id,f_name,<span class="keyword">sequence</span>,icon,img,<span class="keyword">NOW</span>(),is_pure,<span class="string">'1'</span>,<span class="string">'2'</span> <span class="keyword">FROM</span> <span class="string">`api_funny`</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="keyword">oid</span>;</div><div class="line">	  <span class="comment">-- img</span></div><div class="line">  OPEN cursor_img; </div><div class="line">  <span class="comment">-- 取游标数据到变量temp_id</span></div><div class="line">  fetch  cursor_img into temp_id;</div><div class="line">  <span class="comment">-- 循环</span></div><div class="line">  while s &lt;&gt; 1 do</div><div class="line">	<span class="comment">-- 执行操作</span></div><div class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> api_funny_img(<span class="keyword">id</span>,funny_id,f_no,img_frame_from,img_frame_to,img_frame_all,img_frame_x,img_frame_y,img_frame_angle,img_frame_width,img_frame_height,create_time) </div><div class="line">		<span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="keyword">REPLACE</span>(<span class="keyword">UUID</span>(),<span class="string">"-"</span>,<span class="string">""</span>)),uid,f_no,img_frame_from,img_frame_to,img_frame_all,img_frame_x,img_frame_y,img_frame_angle,img_frame_width,img_frame_height,c_time </div><div class="line">		<span class="keyword">FROM</span> api_funny_img <span class="keyword">WHERE</span> <span class="keyword">id</span>=temp_id;</div><div class="line">	fetch  cursor_img into temp_id;</div><div class="line">	<span class="keyword">end</span> <span class="keyword">while</span>;</div><div class="line">  <span class="comment">-- 关闭游标</span></div><div class="line">  CLOSE cursor_img;</div><div class="line"></div><div class="line">  <span class="comment">-- word</span></div><div class="line">  <span class="comment">-- 重置标记</span></div><div class="line">  <span class="keyword">SET</span> s=<span class="number">0</span>;</div><div class="line">  OPEN cursor_word; </div><div class="line">  fetch  cursor_word into temp_id;</div><div class="line">  while s &lt;&gt; 1 do</div><div class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> api_funny_word(<span class="keyword">id</span>,funny_id,f_no,word,word_frame_from,word_frame_to,word_frame_all,word_frame_x,word_frame_y,word_frame_angle,word_frame_width,word_frame_height,word_color,word_align,create_time)</div><div class="line">			<span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="keyword">REPLACE</span>(<span class="keyword">UUID</span>(),<span class="string">"-"</span>,<span class="string">""</span>)),uid,f_no,word,word_frame_from,word_frame_to,word_frame_all,word_frame_x,word_frame_y,word_frame_angle,word_frame_width,word_frame_height,word_color,word_align,c_time </div><div class="line">			<span class="keyword">FROM</span> api_funny_word <span class="keyword">WHERE</span> <span class="keyword">id</span>=temp_id;</div><div class="line">		fetch  cursor_word into temp_id;</div><div class="line">  <span class="keyword">end</span> <span class="keyword">while</span>;  </div><div class="line">  CLOSE cursor_word;</div><div class="line"></div><div class="line">	<span class="keyword">COMMIT</span>;</div><div class="line"> </div><div class="line"><span class="keyword">END</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;为了处理老数据，从一张父表，两张子表复制数据。涉及到生成id关联以及子表多条记录复制，使用了存储过程，cursor遍历结果集。&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="mysql" scheme="http://aimigit.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>java对Gif图片合成文字</title>
    <link href="http://aimigit.github.io/2018/04/12/java-gif-image/"/>
    <id>http://aimigit.github.io/2018/04/12/java-gif-image/</id>
    <published>2018-04-12T08:19:55.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Gif概述"><a href="#Gif概述" class="headerlink" title="Gif概述"></a>Gif概述</h2><p>GIF(Graphics Interchange Format)的原义是“图像互换格式”，是CompuServe公司在 1987 年开发的图像文件格式。GIF文件的数据，是一种基于LZW算法的连续色调的无损压缩格式。其压缩率一般在50%左右，它不属于任何应用程序。GIF格式可以存多幅彩色图像，如果把存于一个文件中的多幅图像数据逐幅读出并显示到屏幕上，就可构成一种最简单的动画。<br>GIF格式自1987年由CompuServe公司引入后，因其体积小、成像相对清晰，特别适合于初期慢速的互联网，而大受欢迎。<br>目前网络上流行的动图表情包，以Gif格式为主。大概原理是多张连续图片，以一定的时间间隔轮播，形成每帧动画效果。<br>要在Gif图片上加文字，就要在每帧的相同位置，画上文字。</p>
<h2 id="java-画图"><a href="#java-画图" class="headerlink" title="java 画图"></a>java 画图</h2><p>使用了第三方文件  LZWEncoder.java,NeuQuant.java,GifDecoder.java,AnimatedGifEncoder.java</p>
<a id="more"></a>    
<h2 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">  * </span></div><div class="line"><span class="comment">  * <span class="doctag">@Title</span>: gifWord </span></div><div class="line"><span class="comment">  * <span class="doctag">@Description</span>: 动态图加文字</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> path</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> destImageFile</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> word 文字</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> x x坐标</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> y y坐标</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> fontColor #FFFFFF 颜色</span></div><div class="line"><span class="comment">  * <span class="doctag">@param</span> fontSize 文字大小</span></div><div class="line"><span class="comment">  * <span class="doctag">@throws</span> IOException</span></div><div class="line"><span class="comment">  */</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">gifWord</span><span class="params">(String path,String destImageFile,String word,<span class="keyword">int</span> x,<span class="keyword">int</span> y,String fontColor,<span class="keyword">int</span> fontSize)</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">	  GifDecoder decoder = <span class="keyword">new</span> GifDecoder();</div><div class="line">      decoder.read(path);  </div><div class="line">      <span class="keyword">int</span> n = decoder.getFrameCount(); <span class="comment">//得到frame的个数  </span></div><div class="line">      </div><div class="line">      AnimatedGifEncoder animatedGifEncoder = <span class="keyword">new</span> AnimatedGifEncoder();</div><div class="line">      <span class="comment">//重复播放</span></div><div class="line">      animatedGifEncoder.setRepeat(<span class="number">0</span>); </div><div class="line">      <span class="comment">//设置要替换成透明的颜色,去黑底</span></div><div class="line"><span class="comment">//      animatedGifEncoder.setTransparent(Color.black);</span></div><div class="line">      animatedGifEncoder.start(destImageFile);</div><div class="line">  		 </div><div class="line">      Color color=toColorFromString(fontColor);</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">    	  <span class="comment">//得到帧  </span></div><div class="line">          BufferedImage frame = decoder.getFrame(i); </div><div class="line">          <span class="comment">//透明底转白底</span></div><div class="line">          frame= frameTransparentConvert(frame);</div><div class="line">          <span class="comment">//文字设置</span></div><div class="line">          createFont( frame, word,x,y,color,fontSize);</div><div class="line">          <span class="comment">//得到延迟时间  </span></div><div class="line">          <span class="keyword">int</span> delay = decoder.getDelay(i); </div><div class="line">          animatedGifEncoder.setDelay(delay); <span class="comment">//设置播放的延迟时间  </span></div><div class="line">          animatedGifEncoder.addFrame(frame);  <span class="comment">//添加到帧中  </span></div><div class="line">      &#125;  </div><div class="line">      animatedGifEncoder.finish(); </div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  </div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * </span></div><div class="line"><span class="comment">   * <span class="doctag">@Title</span>: jpgWord </span></div><div class="line"><span class="comment">   * <span class="doctag">@Description</span>: 静态图加文字</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> path</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> destImageFile</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> word</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> x</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> y</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> fontColor</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> fontSize</span></div><div class="line"><span class="comment">   * <span class="doctag">@throws</span> IOException</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">jpgWord</span><span class="params">(String path,String destImageFile,String word,<span class="keyword">int</span> x,<span class="keyword">int</span> y,String fontColor,<span class="keyword">int</span> fontSize)</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">	  File img = <span class="keyword">new</span> File(path);</div><div class="line">      BufferedImage frame = ImageIO.read(img);</div><div class="line">      <span class="comment">//文字设置</span></div><div class="line">      Color color=toColorFromString(fontColor);</div><div class="line">      createFont( frame, word,x,y,color,fontSize);</div><div class="line">      ImageIO.write((BufferedImage) frame,  <span class="string">"gif"</span>, <span class="keyword">new</span> File(destImageFile));</div><div class="line">  &#125;</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * </span></div><div class="line"><span class="comment">   * <span class="doctag">@Title</span>: frameTransparentConvert </span></div><div class="line"><span class="comment">   * <span class="doctag">@Description</span>: 透明加白色底</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> bufferedImage</span></div><div class="line"><span class="comment">   * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> BufferedImage <span class="title">frameTransparentConvert</span><span class="params">(BufferedImage bufferedImage)</span></span>&#123;</div><div class="line">	  BufferedImage im = <span class="keyword">new</span> BufferedImage(bufferedImage.getWidth(), bufferedImage.getHeight(), BufferedImage.TYPE_4BYTE_ABGR);</div><div class="line">	  Graphics2D g = im.createGraphics();</div><div class="line">	  g.setColor(Color.white); </div><div class="line">	  g.fillRect(<span class="number">0</span>, <span class="number">0</span>, bufferedImage.getWidth(), bufferedImage.getHeight());</div><div class="line">	  g.drawImage(bufferedImage, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);</div><div class="line">	  <span class="keyword">return</span> im;</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">createFont</span><span class="params">(BufferedImage bufferedImage,String word,<span class="keyword">int</span> x,<span class="keyword">int</span> y,Color fontColor,<span class="keyword">int</span> fontSize )</span> </span>&#123;</div><div class="line">	  </div><div class="line">	  <span class="keyword">try</span> &#123;</div><div class="line">          Graphics2D g = bufferedImage.createGraphics();</div><div class="line">          </div><div class="line"><span class="comment">//          File file = new File(fontPath);  //字体文件</span></div><div class="line"><span class="comment">//          Font font = Font.createFont(Font.TRUETYPE_FONT, file); //根据字体文件所在位置,创建新的字体对象(此语句在jdk1.5下面才支持)  </span></div><div class="line">          Font font=<span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>,Font.BOLD,fontSize); </div><div class="line">          g.setFont(font);</div><div class="line">          <span class="comment">//字的颜色</span></div><div class="line">          g.setColor(fontColor);  </div><div class="line">          <span class="comment">//字数</span></div><div class="line">          <span class="keyword">int</span> wordNum=word.length();</div><div class="line">          <span class="keyword">int</span> imgWidth=bufferedImage.getWidth();</div><div class="line">          <span class="keyword">int</span> imgHeight=bufferedImage.getHeight();</div><div class="line">          </div><div class="line">          </div><div class="line">          <span class="comment">/* 分行，计算各行文字内容 */</span></div><div class="line">          FontMetrics m = g.getFontMetrics();</div><div class="line">          <span class="keyword">int</span> fontHeight = m.getAscent() + m.getDescent();</div><div class="line">          <span class="keyword">int</span> lineWidth = imgWidth-x;</div><div class="line">		  <span class="keyword">char</span>[] chars = word.toCharArray();</div><div class="line">		  List&lt;String&gt; rows = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">		  <span class="keyword">int</span> fromIndex = <span class="number">0</span>;</div><div class="line">		  <span class="keyword">int</span> strWidth = <span class="number">0</span>;</div><div class="line">		  <span class="comment">// 逐个字符累加计算长度,超过行宽,自动换行</span></div><div class="line">		  <span class="keyword">for</span> (<span class="keyword">int</span> bgn = <span class="number">0</span>; bgn &lt; word.length();) &#123;</div><div class="line">			  strWidth += m.charWidth(chars[bgn]);</div><div class="line">		</div><div class="line">			  <span class="keyword">if</span> (strWidth &gt; lineWidth) &#123;</div><div class="line">			  	  rows.add(word.substring(fromIndex, bgn));</div><div class="line">				  strWidth = <span class="number">0</span>;</div><div class="line">				  fromIndex = bgn;</div><div class="line">			  &#125; <span class="keyword">else</span>&#123;</div><div class="line">				  bgn++;</div><div class="line">			  &#125;</div><div class="line">		  &#125;</div><div class="line">		<span class="comment">// 加上最后一行</span></div><div class="line">		<span class="keyword">if</span> (fromIndex &lt; word.length()) </div><div class="line">			rows.add(word.substring(fromIndex, word.length()));</div><div class="line">		String element;</div><div class="line">		<span class="comment">//根据计算出的行数绘制</span></div><div class="line">		<span class="keyword">for</span> (Iterator iter = rows.iterator(); iter.hasNext();) &#123;</div><div class="line">			element = (String) iter.next();</div><div class="line">			<span class="comment">/* 绘制字符串 */</span></div><div class="line">			g.drawString(element, (<span class="keyword">float</span>) x, (<span class="keyword">float</span>) (y + m.getAscent()));</div><div class="line">			y += fontHeight;</div><div class="line">		&#125;</div><div class="line">			</div><div class="line">          g.dispose();</div><div class="line">          </div><div class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">          e.printStackTrace();</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="comment">/** </span></div><div class="line"><span class="comment">   * 字符串转换成Color对象 </span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> colorStr 16进制颜色字符串 </span></div><div class="line"><span class="comment">   * <span class="doctag">@return</span> Color对象 </span></div><div class="line"><span class="comment">   * */</span>  </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Color <span class="title">toColorFromString</span><span class="params">(String colorStr)</span></span>&#123;  </div><div class="line">	  String strR = colorStr.substring(<span class="number">1</span>,<span class="number">3</span>);  </div><div class="line">      String strG = colorStr.substring(<span class="number">3</span>,<span class="number">5</span>);  </div><div class="line">      String strB = colorStr.substring(<span class="number">5</span>,<span class="number">7</span>);  </div><div class="line">      <span class="keyword">int</span> r = Integer.parseInt(strR,<span class="number">16</span>);  </div><div class="line">      <span class="keyword">int</span> g = Integer.parseInt(strG,<span class="number">16</span>);  </div><div class="line">      <span class="keyword">int</span> b = Integer.parseInt(strB,<span class="number">16</span>);  </div><div class="line">      Color color =  <span class="keyword">new</span> Color(r,g,b) ;  </div><div class="line">      <span class="keyword">return</span> color;  </div><div class="line">  &#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Gif概述&quot;&gt;&lt;a href=&quot;#Gif概述&quot; class=&quot;headerlink&quot; title=&quot;Gif概述&quot;&gt;&lt;/a&gt;Gif概述&lt;/h2&gt;&lt;p&gt;GIF(Graphics Interchange Format)的原义是“图像互换格式”，是CompuServe公司在 1987 年开发的图像文件格式。GIF文件的数据，是一种基于LZW算法的连续色调的无损压缩格式。其压缩率一般在50%左右，它不属于任何应用程序。GIF格式可以存多幅彩色图像，如果把存于一个文件中的多幅图像数据逐幅读出并显示到屏幕上，就可构成一种最简单的动画。&lt;br&gt;GIF格式自1987年由CompuServe公司引入后，因其体积小、成像相对清晰，特别适合于初期慢速的互联网，而大受欢迎。&lt;br&gt;目前网络上流行的动图表情包，以Gif格式为主。大概原理是多张连续图片，以一定的时间间隔轮播，形成每帧动画效果。&lt;br&gt;要在Gif图片上加文字，就要在每帧的相同位置，画上文字。&lt;/p&gt;
&lt;h2 id=&quot;java-画图&quot;&gt;&lt;a href=&quot;#java-画图&quot; class=&quot;headerlink&quot; title=&quot;java 画图&quot;&gt;&lt;/a&gt;java 画图&lt;/h2&gt;&lt;p&gt;使用了第三方文件  LZWEncoder.java,NeuQuant.java,GifDecoder.java,AnimatedGifEncoder.java&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="java" scheme="http://aimigit.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>linux添加字体</title>
    <link href="http://aimigit.github.io/2018/03/29/linux-add-font/"/>
    <id>http://aimigit.github.io/2018/03/29/linux-add-font/</id>
    <published>2018-03-29T09:16:37.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>linux自带的字体比较少，在做图片文字合成时，需要指定的文字字体。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">查看系统中的字体</div><div class="line"><span class="built_in">fc</span>-list</div><div class="line">查看系统中的中文字体</div><div class="line"><span class="built_in">fc</span>-list :lang=zh</div><div class="line"></div><div class="line">[root@localhost ~]<span class="comment"># fc-list</span></div><div class="line">Bitstream Vera Sans Mono:style=Bold</div><div class="line">Bitstream Vera Sans:style=Oblique</div><div class="line">Bitstream Vera Sans:style=Roman</div><div class="line">Bitstream Vera Sans Mono:style=Oblique</div><div class="line">Bitstream Vera Sans:style=Bold</div><div class="line">Bitstream Vera Serif:style=Roman</div><div class="line">Bitstream Vera Sans Mono:style=Bold Oblique</div><div class="line">Bitstream Vera Sans:style=Bold Oblique</div><div class="line">文鼎PL中楷Uni,AR PL ZenKai Uni:style=Medium</div><div class="line">Bitstream Vera Sans Mono:style=Roman</div><div class="line">Fixed:style=Regular</div><div class="line">文鼎PL细上海宋Uni,AR PL ShanHeiSun Uni,文鼎PL細上海宋Uni:style=Regular</div><div class="line">Bitstream Vera Serif:style=Bold</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="安装新字体"><a href="#安装新字体" class="headerlink" title="安装新字体"></a>安装新字体</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd  /usr/share/fonts</span></div><div class="line">[root@localhost fonts]<span class="comment"># mkdir win</span></div><div class="line">[root@localhost fonts]<span class="comment"># cd win</span></div><div class="line">把需要安装的字体放到目录后，执行下面命令</div><div class="line">[root@localhost win]<span class="comment"># mkfontscale </span></div><div class="line">[root@localhost win]<span class="comment"># mkfontdir</span></div><div class="line">[root@localhost win]<span class="comment"># fc-list</span></div><div class="line">Bitstream Vera Sans Mono:style=Bold</div><div class="line">Bitstream Vera Sans:style=Oblique</div><div class="line">Bitstream Vera Sans:style=Roman</div><div class="line">微软雅黑,Microsoft YaHei:style=Regular,Normal,obyčejné,Standard,Κανονικά,Normaali,Normál,Normale,Standaard,Normalny,Обычный,Normálne,Navadno,Arrunta</div><div class="line">Bitstream Vera Sans Mono:style=Oblique</div><div class="line">Bitstream Vera Sans:style=Bold</div><div class="line">Bitstream Vera Serif:style=Roman</div><div class="line">Bitstream Vera Sans Mono:style=Bold Oblique</div><div class="line">Bitstream Vera Sans:style=Bold Oblique</div><div class="line">文鼎PL中楷Uni,AR PL ZenKai Uni:style=Medium</div><div class="line">Bitstream Vera Sans Mono:style=Roman</div><div class="line">微软雅黑,Microsoft YaHei:style=Bold,Negreta,tučné,fed,Fett,Έντονα,Negrita,Lihavoitu,Gras,Félkövér,Grassetto,Vet,Halvfet,Pogrubiony,Negrito,Полужирный,Fet,Kalın,Krepko,Lodia</div><div class="line">Fixed:style=Regular</div><div class="line">文鼎PL细上海宋Uni,AR PL ShanHeiSun Uni,文鼎PL細上海宋Uni:style=Regular</div><div class="line">Bitstream Vera Serif:style=Bold</div><div class="line">可以看到增加了微软雅黑字体。</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;linux自带的字体比较少，在做图片文字合成时，需要指定的文字字体。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;查看系统中的字体&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;fc&lt;/span&gt;-list&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;查看系统中的中文字体&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;fc&lt;/span&gt;-list :lang=zh&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# fc-list&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans Mono:style=Bold&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans:style=Oblique&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans:style=Roman&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans Mono:style=Oblique&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans:style=Bold&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Serif:style=Roman&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans Mono:style=Bold Oblique&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans:style=Bold Oblique&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;文鼎PL中楷Uni,AR PL ZenKai Uni:style=Medium&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Sans Mono:style=Roman&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Fixed:style=Regular&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;文鼎PL细上海宋Uni,AR PL ShanHeiSun Uni,文鼎PL細上海宋Uni:style=Regular&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Bitstream Vera Serif:style=Bold&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="linux" scheme="http://aimigit.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>html跳转页面小技巧</title>
    <link href="http://aimigit.github.io/2018/01/17/html-jump/"/>
    <id>http://aimigit.github.io/2018/01/17/html-jump/</id>
    <published>2018-01-17T08:58:22.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="html的实现"><a href="#html的实现" class="headerlink" title="html的实现"></a>html的实现</h2><p>优点：简单<br>缺点：Struts Tiles中无法使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 以下方式只是刷新不跳转到其他页面 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"refresh"</span> <span class="attr">content</span>=<span class="string">"10"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 以下方式定时转到其他页面 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"refresh"</span> <span class="attr">content</span>=<span class="string">"5;url=hello.html"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>    
<h2 id="javascript的实现"><a href="#javascript的实现" class="headerlink" title="javascript的实现"></a>javascript的实现</h2><p>优点：灵活，可以结合更多的其他功能<br>缺点：受到不同浏览器的影响<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script language=<span class="string">"javascript"</span> type=<span class="string">"text/javascript"</span>&gt; </div><div class="line"><span class="comment">// 以下方式直接跳转</span></div><div class="line"><span class="built_in">window</span>.location.href=<span class="string">'hello.html'</span>;</div><div class="line"><span class="comment">// 以下方式定时跳转</span></div><div class="line">setTimeout(<span class="string">"javascript:location.href='hello.html'"</span>, <span class="number">5000</span>); </div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="正则获取get请求参数"><a href="#正则获取get请求参数" class="headerlink" title="正则获取get请求参数"></a>正则获取get请求参数</h2><p>html并没有对http请求的处理，不像jsp，php，python。但是我们可以用正则表达式提取参数。<br>缺点：只能处理get请求<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetQueryString</span>(<span class="params">name</span>)</span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">     <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span>+ name +<span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</div><div class="line">     <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</div><div class="line">     <span class="keyword">if</span>(r!=<span class="literal">null</span>)<span class="keyword">return</span>  <span class="built_in">unescape</span>(r[<span class="number">2</span>]); <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// 调用方法</span></div><div class="line">alert(GetQueryString(<span class="string">"参数名1"</span>));</div><div class="line">alert(GetQueryString(<span class="string">"参数名2"</span>));</div></pre></td></tr></table></figure></p>
<h2 id="正则构造startWith，endWith方法"><a href="#正则构造startWith，endWith方法" class="headerlink" title="正则构造startWith，endWith方法"></a>正则构造startWith，endWith方法</h2><p>javascript 没有原生的这2个方法，一般用indexOf判断，<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//或者用indexOf判断</span></div><div class="line"><span class="keyword">var</span> index = str.indexOf(<span class="string">'abc'</span>);</div><div class="line"><span class="keyword">if</span>(index==<span class="number">0</span>)&#123;</div><div class="line"><span class="comment">//以'abc'开头</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们也可以自己构造。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.startWith=<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;     </div><div class="line">  <span class="keyword">var</span> reg=<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^"</span>+str);     </div><div class="line">  <span class="keyword">return</span> reg.test(<span class="keyword">this</span>);        </div><div class="line">&#125;  </div><div class="line"></div><div class="line"><span class="built_in">String</span>.prototype.endWith=<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;     </div><div class="line">  <span class="keyword">var</span> reg=<span class="keyword">new</span> <span class="built_in">RegExp</span>(str+<span class="string">"$"</span>);     </div><div class="line">  <span class="keyword">return</span> reg.test(<span class="keyword">this</span>);        </div><div class="line">&#125;</div><div class="line"><span class="comment">//或者用indexOf判断</span></div><div class="line"><span class="keyword">var</span> index = str.indexOf(<span class="string">'abc'</span>);</div><div class="line"><span class="keyword">if</span>(index==<span class="number">0</span>)&#123;</div><div class="line"><span class="comment">//以'abc'开头</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="正则转换回车换行符"><a href="#正则转换回车换行符" class="headerlink" title="正则转换回车换行符"></a>正则转换回车换行符</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertCRLF</span>(<span class="params">str</span>)</span>&#123;</div><div class="line">	<span class="keyword">if</span>(str!=<span class="literal">null</span>)</div><div class="line">	str = str.replace(<span class="regexp">/[\n]/g</span>,<span class="string">"&lt;br&gt;"</span>)</div><div class="line">	<span class="keyword">return</span> str;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;html的实现&quot;&gt;&lt;a href=&quot;#html的实现&quot; class=&quot;headerlink&quot; title=&quot;html的实现&quot;&gt;&lt;/a&gt;html的实现&lt;/h2&gt;&lt;p&gt;优点：简单&lt;br&gt;缺点：Struts Tiles中无法使用&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 以下方式只是刷新不跳转到其他页面 --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;http-equiv&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;refresh&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;10&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 以下方式定时转到其他页面 --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;http-equiv&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;refresh&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;5;url=hello.html&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="html5" scheme="http://aimigit.github.io/tags/html5/"/>
    
  </entry>
  
  <entry>
    <title>nginx_worker_connections异常</title>
    <link href="http://aimigit.github.io/2017/12/07/nginx-worker-connections/"/>
    <id>http://aimigit.github.io/2017/12/07/nginx-worker-connections/</id>
    <published>2017-12-07T07:14:31.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="异常信息"><a href="#异常信息" class="headerlink" title="异常信息"></a>异常信息</h2><p>[alert] 14102#0: 1024 worker_connections are not enough</p>
<p>worker_connections 参数默认1024，不够用的话配置大一些，同时小于worker_rlimit_nofile 参数值。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#worker进程数，通常设置等同于CPU数量，auto为自动检测</span></div><div class="line"><span class="attribute">worker_processes</span>  auto;</div><div class="line"><span class="comment">#worker进程打开最大文件数，可CPU*10000设置</span></div><div class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">100000</span>;</div><div class="line"></div><div class="line"><span class="section">events</span> &#123;</div><div class="line">    <span class="attribute">worker_connections</span>  <span class="number">10240</span>;</div><div class="line">   <span class="comment">#告诉nginx收到一个新链接通知后接受尽可能多的链接</span></div><div class="line">    <span class="attribute">multi_accept</span> <span class="literal">on</span>;</div><div class="line">   <span class="comment">#设置用于复用客户端线程的轮训方法</span></div><div class="line">   <span class="attribute">use</span> <span class="literal">epoll</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<a id="more"></a>    
<h2 id="linux打开文件数配置"><a href="#linux打开文件数配置" class="headerlink" title="linux打开文件数配置"></a>linux打开文件数配置</h2><p>调大open files参数值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[delvep@localhost ~]$ <span class="built_in">ulimit</span> -a</div><div class="line">core file size          (blocks, -c) 0</div><div class="line">data seg size           (kbytes, -d) unlimited</div><div class="line">scheduling priority             (-e) 0</div><div class="line">file size               (blocks, -f) unlimited</div><div class="line">pending signals                 (-i) 77824</div><div class="line">max locked memory       (kbytes, -l) 32</div><div class="line">max memory size         (kbytes, -m) unlimited</div><div class="line">open files                      (-n) 65535</div><div class="line">pipe size            (512 bytes, -p) 8</div><div class="line">POSIX message queues     (bytes, -q) 819200</div><div class="line">real-time priority              (-r) 0</div><div class="line">stack size              (kbytes, -s) 10240</div><div class="line">cpu time               (seconds, -t) unlimited</div><div class="line">max user processes              (-u) 77824</div><div class="line">virtual memory          (kbytes, -v) unlimited</div><div class="line">file locks                      (-x) unlimited</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;异常信息&quot;&gt;&lt;a href=&quot;#异常信息&quot; class=&quot;headerlink&quot; title=&quot;异常信息&quot;&gt;&lt;/a&gt;异常信息&lt;/h2&gt;&lt;p&gt;[alert] 14102#0: 1024 worker_connections are not enough&lt;/p&gt;
&lt;p&gt;worker_connections 参数默认1024，不够用的话配置大一些，同时小于worker_rlimit_nofile 参数值。&lt;br&gt;&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#worker进程数，通常设置等同于CPU数量，auto为自动检测&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;worker_processes&lt;/span&gt;  auto;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#worker进程打开最大文件数，可CPU*10000设置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;worker_rlimit_nofile&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;100000&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;events&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;worker_connections&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;10240&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;#告诉nginx收到一个新链接通知后接受尽可能多的链接&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;multi_accept&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;#设置用于复用客户端线程的轮训方法&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;attribute&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;epoll&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="nginx" scheme="http://aimigit.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx-http图片服务器配置</title>
    <link href="http://aimigit.github.io/2017/11/30/nginx-image-server/"/>
    <id>http://aimigit.github.io/2017/11/30/nginx-image-server/</id>
    <published>2017-11-30T08:57:57.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="nginx-常用命令"><a href="#nginx-常用命令" class="headerlink" title="nginx 常用命令"></a>nginx 常用命令</h2><p>前面写nginx做反向代理，负载均衡的配置。本文写nginx做http服务器的配置，把静态文件都交给nginx管理。</p>
<ul>
<li>nginx   启动</li>
<li>nginx   -c /etc/nginx/nginx.conf  指定配置文件启动</li>
<li>nginx -s stop  关闭</li>
<li>nginx -t  检测配置文件</li>
<li>nginx -s reload 重载配置文件</li>
</ul>
<a id="more"></a>    
<h2 id="配置文件nginx-conf例子参考"><a href="#配置文件nginx-conf例子参考" class="headerlink" title="配置文件nginx.conf例子参考"></a>配置文件nginx.conf例子参考</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">user</span>  webuser;</div><div class="line"></div><div class="line"><span class="comment">#worker进程数，通常设置等同于CPU数量，auto为自动检测</span></div><div class="line"><span class="attribute">worker_processes</span>  auto;</div><div class="line"><span class="comment">#worker进程打开最大文件数，可CPU*10000设置</span></div><div class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">100000</span>;</div><div class="line"></div><div class="line"><span class="comment">#error_log  logs/error.log;</span></div><div class="line"><span class="attribute">error_log</span>  logs/error.log  <span class="literal">notice</span>;</div><div class="line"><span class="comment">#error_log  logs/error.log  info;</span></div><div class="line"><span class="comment">#error_log  logs/error.log  error;</span></div><div class="line"></div><div class="line"><span class="attribute">pid</span>        logs/nginx.pid;</div><div class="line"></div><div class="line"></div><div class="line"><span class="section">events</span> &#123;</div><div class="line">    <span class="attribute">worker_connections</span>  <span class="number">10240</span>;</div><div class="line">   <span class="comment">#告诉nginx收到一个新链接通知后接受尽可能多的链接</span></div><div class="line">    <span class="attribute">multi_accept</span> <span class="literal">on</span>;</div><div class="line">   <span class="comment">#设置用于复用客户端线程的轮训方法</span></div><div class="line">   <span class="attribute">use</span> <span class="literal">epoll</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="section">http</span> &#123;</div><div class="line">    <span class="attribute">include</span>       mime.types;</div><div class="line">    <span class="attribute">default_type</span>  application/octet-stream;</div><div class="line"></div><div class="line">    <span class="attribute">log_format</span>  main  <span class="string">'<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" '</span></div><div class="line">                      <span class="string">'<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> "<span class="variable">$http_referer</span>" '</span></div><div class="line">                      <span class="string">'"<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>"'</span>;</div><div class="line">   </div><div class="line">    <span class="comment">#设置nginx是否存储访问日志，关闭这个可以让读取磁盘IO操作更快</span></div><div class="line">    <span class="comment">#access_log  logs/access.log  main;</span></div><div class="line">    <span class="comment">#优化磁盘IO设置，指定nginx是否调用sendfile函数来输出文件，普通应用设为on，下载等磁盘IO高的应用，可设为off</span></div><div class="line">    <span class="attribute">sendfile</span>        <span class="literal">off</span>;</div><div class="line">    <span class="comment">#tcp_nopush     on;</span></div><div class="line"></div><div class="line">    <span class="comment">#keepalive_timeout  0;</span></div><div class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">30</span>;</div><div class="line">    <span class="comment">#设置用户保存各种key的共享内存的参数，5m指的是5兆</span></div><div class="line">    <span class="attribute">limit_conn_zone</span> <span class="variable">$binary_remote_addr</span> zone=addr:<span class="number">5m</span>;</div><div class="line">    <span class="comment">#为给定的key设置最大的连接数，这里的key是addr，设定的值是100，就是说允许每一个IP地址最多同时打开100个连接</span></div><div class="line">    <span class="attribute">limit_conn</span> addr <span class="number">100</span>;</div><div class="line">   </div><div class="line">    <span class="comment">#gzip  on;</span></div><div class="line">    <span class="comment">#gzip_disable "MSIE [1-6]."; </span></div><div class="line">    <span class="comment">#开发缓存的同时也指定了缓存文件的最大数量，20s如果文件没有请求则删除缓存</span></div><div class="line">    <span class="attribute">open_file_cache</span> max=<span class="number">100000</span> inactive=<span class="number">20s</span>;</div><div class="line">    <span class="comment">#指多长时间检查一次缓存的有效信息</span></div><div class="line">    <span class="attribute">open_file_cache_valid</span> <span class="number">60s</span>;</div><div class="line">    <span class="comment">#文件缓存最小的访问次数，只有访问超过5次的才会被缓存</span></div><div class="line">    <span class="attribute">open_file_cache_min_uses</span> <span class="number">5</span>;</div><div class="line">    <span class="comment">#当搜索一个文件时是否缓存错误信息</span></div><div class="line">    <span class="attribute">open_file_cache_errors</span> <span class="literal">on</span>;</div><div class="line"></div><div class="line">    <span class="comment">#允许客户端请求的最大单文件字节数</span></div><div class="line">    <span class="attribute">client_max_body_size</span> <span class="number">30m</span>;</div><div class="line">    <span class="comment">#冲区代理缓冲用户端请求的最大字节数</span></div><div class="line">    <span class="attribute">client_header_buffer_size</span> <span class="number">32k</span>;</div><div class="line"></div><div class="line">    <span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span>       <span class="number">8181</span>;</div><div class="line">        <span class="attribute">server_name</span>  img1.wen.cn;</div><div class="line"></div><div class="line">        <span class="attribute">charset</span> UTF-<span class="number">8</span>;</div><div class="line"></div><div class="line">        <span class="comment">#access_log  logs/host.access.log  main;</span></div><div class="line">        <span class="comment">#网站静态资源（图片，js文件等）</span></div><div class="line">        <span class="attribute">location</span> <span class="regexp"> ^~/web/static/</span> &#123;</div><div class="line">            <span class="attribute">root</span> /home/webuser/webapps;</div><div class="line">            <span class="attribute">index</span>  index.html index.htm;</div><div class="line">            <span class="attribute">proxy_store</span> <span class="literal">on</span>;</div><div class="line">            <span class="attribute">proxy_temp_path</span> /home/webuser/webapps;</div><div class="line">            <span class="attribute">proxy_set_header</span> Host img1.web.cn;</div><div class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</div><div class="line">            <span class="attribute">if</span> ( !-e <span class="variable">$request_filename</span> ) &#123;   </div><div class="line">                 <span class="attribute">proxy_pass</span> http://117.11.11.87:8088;   </div><div class="line">             &#125; </div><div class="line">			<span class="comment">#缓存90天</span></div><div class="line">            <span class="attribute">expires</span> <span class="number">90d</span>;</div><div class="line">            <span class="attribute">access_log</span> <span class="literal">off</span>;</div><div class="line">        &#125;</div><div class="line">		<span class="comment">#网站其他请求</span></div><div class="line">         <span class="attribute">location</span> /web/&#123;</div><div class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</div><div class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</div><div class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</div><div class="line">            <span class="attribute">proxy_pass</span> http://www.web.cn:8080;</div><div class="line">            <span class="attribute">access_log</span> <span class="literal">off</span>;</div><div class="line">            </div><div class="line">         &#125; </div><div class="line">        <span class="attribute">location</span> /&#123;</div><div class="line">            <span class="attribute">root</span> /home/webuser/nginx-image/html;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">#error_page  404              /404.html;</span></div><div class="line">        </div><div class="line">        <span class="comment"># redirect server error pages to the static page /50x.html</span></div><div class="line">        <span class="comment">#</span></div><div class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</div><div class="line">        <span class="attribute">location</span> = /50x.html &#123;</div><div class="line">            <span class="attribute">root</span>   html;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment"># deny access to .htaccess files, if Apache's document root</span></div><div class="line">        <span class="comment"># concurs with nginx's one</span></div><div class="line">        <span class="comment">#</span></div><div class="line">        <span class="comment">#location ~ /\.ht &#123;</span></div><div class="line">        <span class="comment">#    deny  all;</span></div><div class="line">        <span class="comment">#&#125;</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># another virtual host using mix of IP-, name-, and port-based configuration</span></div><div class="line">    <span class="comment">#</span></div><div class="line">    <span class="comment">#server &#123;</span></div><div class="line">    <span class="comment">#    listen       8000;</span></div><div class="line">    <span class="comment">#    listen       somename:8080;</span></div><div class="line">    <span class="comment">#    server_name  somename  alias  another.alias;</span></div><div class="line"></div><div class="line">    <span class="comment">#    location / &#123;</span></div><div class="line">    <span class="comment">#        root   html;</span></div><div class="line">    <span class="comment">#        index  index.html index.htm;</span></div><div class="line">    <span class="comment">#    &#125;</span></div><div class="line">    <span class="comment">#&#125;</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># HTTPS server</span></div><div class="line">    <span class="comment">#</span></div><div class="line">    <span class="comment">#server &#123;</span></div><div class="line">    <span class="comment">#    listen       443 ssl;</span></div><div class="line">    <span class="comment">#    server_name  localhost;</span></div><div class="line"></div><div class="line">    <span class="comment">#    ssl_certificate      cert.pem;</span></div><div class="line">    <span class="comment">#    ssl_certificate_key  cert.key;</span></div><div class="line"></div><div class="line">    <span class="comment">#    ssl_session_cache    shared:SSL:1m;</span></div><div class="line">    <span class="comment">#    ssl_session_timeout  5m;</span></div><div class="line"></div><div class="line">    <span class="comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span></div><div class="line">    <span class="comment">#    ssl_prefer_server_ciphers  on;</span></div><div class="line"></div><div class="line">    <span class="comment">#    location / &#123;</span></div><div class="line">    <span class="comment">#        root   html;</span></div><div class="line">    <span class="comment">#        index  index.html index.htm;</span></div><div class="line">    <span class="comment">#    &#125;</span></div><div class="line">    <span class="comment">#&#125;</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;nginx-常用命令&quot;&gt;&lt;a href=&quot;#nginx-常用命令&quot; class=&quot;headerlink&quot; title=&quot;nginx 常用命令&quot;&gt;&lt;/a&gt;nginx 常用命令&lt;/h2&gt;&lt;p&gt;前面写nginx做反向代理，负载均衡的配置。本文写nginx做http服务器的配置，把静态文件都交给nginx管理。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nginx   启动&lt;/li&gt;
&lt;li&gt;nginx   -c /etc/nginx/nginx.conf  指定配置文件启动&lt;/li&gt;
&lt;li&gt;nginx -s stop  关闭&lt;/li&gt;
&lt;li&gt;nginx -t  检测配置文件&lt;/li&gt;
&lt;li&gt;nginx -s reload 重载配置文件&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="nginx" scheme="http://aimigit.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>html手机打开qq客户端</title>
    <link href="http://aimigit.github.io/2017/11/24/html-to-qq/"/>
    <id>http://aimigit.github.io/2017/11/24/html-to-qq/</id>
    <published>2017-11-24T06:08:47.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>一般网站会有客户qq，或者aap的html5页面有官方联系方式等，在用户点击qq号，直接打开qq客户端，会更方便友好。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"window.open('tencent://message/?uin=QQ号')"</span>&gt;</span>pc打开方式<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mqqapi://card/show_pslcard?src_type=internal&amp;version=1&amp;uin=qq号&amp;card_type=person&amp;source=qrcode"</span>&gt;</span>打开QQ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mqqapi://card/show_pslcard?src_type=internal&amp;version=1&amp;uin=群号&amp;card_type=group&amp;source=qrcode"</span>&gt;</span>打开QQ群<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="微信打开网页不能下载app问题"><a href="#微信打开网页不能下载app问题" class="headerlink" title="微信打开网页不能下载app问题"></a>微信打开网页不能下载app问题</h2><p>微信对下载链接做了过滤处理，不能打开下载链接。目前处理方式，把app上传到应用宝，获取应用包的下载地址，作为app下载地址。（店大欺客）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.location.href=<span class="string">"http://a.app.qq.com/o/simple.jsp?pkgname=com.xtone.emojikingdom"</span>;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;一般网站会有客户qq，或者aap的html5页面有官方联系方式等，在用户点击qq号，直接打开qq客户端，会更方便友好。&lt;/p&gt;
&lt;h2 id
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="html5" scheme="http://aimigit.github.io/tags/html5/"/>
    
  </entry>
  
  <entry>
    <title>java-ehcache缓存技术</title>
    <link href="http://aimigit.github.io/2017/10/27/java-ehcache/"/>
    <id>http://aimigit.github.io/2017/10/27/java-ehcache/</id>
    <published>2017-10-27T08:31:42.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>常见的三种缓存技术ehcache,memcache,redis。ehcache的特点是快速，轻量，memcache,redis主要用在分布式集群场景。ehcache快的原因是提供了堆栈缓存，直接存在jvm，程序直接调用。<br>由于不同版本的使用方式不同，本文主要讲ehcache 3.4.0使用方式。<br>官网：<a href="http://www.ehcache.org/" target="_blank" rel="external">http://www.ehcache.org/</a></p>
<h2 id="Ehcache支持的数据存储"><a href="#Ehcache支持的数据存储" class="headerlink" title="Ehcache支持的数据存储"></a>Ehcache支持的数据存储</h2><ul>
<li>On-Heap Store - 利用Java的堆栈内存来存储缓存条目。该层使用与Java应用程序相同的堆内存，所有这些都必须由JVM垃圾回收器进行扫描。JVM使用的堆空间越多，应用程序性能将受到垃圾回收暂停的影响越多。这个非常快，但通常是最有限的存储资源。</li>
<li>Off-Heap Store - 仅限可用的RAM限制。不受Java垃圾回收（GC）的约束。相当快，但比On-Heap Store慢，因为在存储和重新访问数据时，必须将数据移入和移出JVM堆。</li>
</ul>
<a id="more"></a>    
<ul>
<li>磁盘存储 - 使用磁盘（文件系统）来存储缓存条目。这种类型的存储资源通常非常丰富，但比基于RAM的慢得多。对于使用磁盘存储的所有应用程序，建议使用快速专用磁盘来优化吞吐量。</li>
<li>群集存储 - 此数据存储是远程服务器上的缓存。远程服务器可以可选地具有提供改进的高可用性的故障切换服务器。由于集群存储由于诸如网络延迟以及建立客户端/服务器一致性等因素而带来性能损失，因此本层本质上比本地非堆存储慢。</li>
</ul>
<p>4个级别，性能由快到慢，存储量由小到大。这里有几个注意，<br>On-Heap 的性能超快，但不能配置太大，会影响jvm资源回收。<br>Off-Heap 最大要低于服务器内存大小，同时要小于运行环境的大小，通过 -XX:MaxDirectMemorySize 参数配置。<br>磁盘存储，建议服务器使用SSD硬盘。<br>群集存储，是通过Terracotta Server 实现。</p>
<h2 id="使用方式1：java-类方式"><a href="#使用方式1：java-类方式" class="headerlink" title="使用方式1：java 类方式"></a>使用方式1：java 类方式</h2><ul>
<li>项目引入 ehcache-3.4.0.jar<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">// 构建一个缓存管理器</span></div><div class="line">	CacheManager cacheManager = CacheManagerBuilder.newCacheManagerBuilder().build(<span class="keyword">true</span>);</div><div class="line">	<span class="comment">// cacheManager.init();</span></div><div class="line">	<span class="comment">// cacheConfiguration -100个换成最大，缓存过期时间1分钟</span></div><div class="line">	CacheConfiguration&lt;String, String&gt; cacheConfiguration = CacheConfigurationBuilder</div><div class="line">			.newCacheConfigurationBuilder(String.class, String.class, ResourcePoolsBuilder.heap(<span class="number">100</span>).offheap(<span class="number">100</span>, MemoryUnit.MB))</div><div class="line">			.withExpiry(Expirations.timeToLiveExpiration(Duration.of(<span class="number">1</span>, TimeUnit.MINUTES  )))</div><div class="line">			.build();</div><div class="line">	<span class="comment">// 根据配置创建一个缓存容器</span></div><div class="line">	Cache&lt;String, String&gt; myCache = cacheManager.createCache(<span class="string">"myCache"</span>, cacheConfiguration);</div><div class="line">	myCache.put(<span class="string">"test"</span>, <span class="string">"hello Ehcache"</span>);</div><div class="line">	<span class="comment">// 循环直到数据过期 否包含该key</span></div><div class="line">	<span class="keyword">while</span> (myCache.containsKey(<span class="string">"test"</span>)) &#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			System.out.println(<span class="string">"值:"</span> + myCache.get(<span class="string">"test"</span>));</div><div class="line">			Thread.sleep(<span class="number">2000</span>);</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	System.out.println(<span class="string">"1缓存已过期"</span>);</div><div class="line">	System.out.println(<span class="string">"值:"</span> + myCache.get(<span class="string">"test"</span>));</div><div class="line">	<span class="comment">//关闭</span></div><div class="line">	cacheManager.close();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="使用方式2：xml方式"><a href="#使用方式2：xml方式" class="headerlink" title="使用方式2：xml方式"></a>使用方式2：xml方式</h2><ul>
<li>项目引入 ehcache-3.4.0.jar</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">config</span></span></div><div class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">'http://www.w3.org/2001/XMLSchema-instance'</span></span></div><div class="line"><span class="tag">	<span class="attr">xmlns</span>=<span class="string">'http://www.ehcache.org/v3'</span></span></div><div class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core.xsd"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">cache</span> <span class="attr">alias</span>=<span class="string">"myDefault"</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;<span class="name">key-type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">key-type</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;<span class="name">value-type</span>&gt;</span>java.util.ArrayList<span class="tag">&lt;/<span class="name">value-type</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 生存周期 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">expiry</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ttl</span> <span class="attr">unit</span>=<span class="string">"hours"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ttl</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">expiry</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 堆栈内存--&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">heap</span> <span class="attr">unit</span>=<span class="string">"entries"</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">heap</span>&gt;</span> </div><div class="line">	   <span class="comment">&lt;!-- 堆外内存--&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">offheap</span> <span class="attr">unit</span>=<span class="string">"MB"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">offheap</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">cache</span> <span class="attr">alias</span>=<span class="string">"myFast"</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;<span class="name">key-type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">key-type</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;<span class="name">value-type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">value-type</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">expiry</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ttl</span> <span class="attr">unit</span>=<span class="string">"minutes"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">ttl</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">expiry</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">heap</span> <span class="attr">unit</span>=<span class="string">"entries"</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">heap</span>&gt;</span> </div><div class="line">	  <span class="tag">&lt;<span class="name">offheap</span> <span class="attr">unit</span>=<span class="string">"MB"</span>&gt;</span>50<span class="tag">&lt;/<span class="name">offheap</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.test.cache;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.ehcache.Cache;</div><div class="line"><span class="keyword">import</span> org.ehcache.CacheManager;</div><div class="line"><span class="keyword">import</span> org.ehcache.config.builders.CacheManagerBuilder;</div><div class="line"><span class="keyword">import</span> org.ehcache.xml.XmlConfiguration;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: MyCache </span></div><div class="line"><span class="comment"> * <span class="doctag">@Description</span>: ehcache缓存管理</span></div><div class="line"><span class="comment"> * <span class="doctag">@version</span>: V1.0  </span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span>: CWQ</span></div><div class="line"><span class="comment"> * <span class="doctag">@date</span>: 2017年10月25日 下午5:09:12</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCache</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> CacheManager cacheManager;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Cache&lt;String, ArrayList&gt; cache;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Cache&lt;String, String&gt; cacheFast;</div><div class="line"></div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		<span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</div><div class="line">			URL myUrl = MyCache.class.getResource(<span class="string">"/ehcache.xml"</span>);</div><div class="line">			XmlConfiguration xmlConfig = <span class="keyword">new</span> XmlConfiguration(myUrl);</div><div class="line">			cacheManager = CacheManagerBuilder.newCacheManager(xmlConfig);</div><div class="line">			cacheManager.init();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (cache == <span class="keyword">null</span>) &#123;</div><div class="line">			cache = cacheManager.getCache(<span class="string">"myDefault"</span>, String.class, ArrayList.class);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (cacheFast == <span class="keyword">null</span>) &#123;</div><div class="line">			cacheFast = cacheManager.getCache(<span class="string">"myFast"</span>, String.class, String.class);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ArrayList ls = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		ls.add(<span class="string">"aa"</span>);</div><div class="line">		ls.add(<span class="string">"bb"</span>);</div><div class="line">		<span class="keyword">try</span> &#123;cache.put(<span class="string">"1"</span>, ls);</div><div class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">				System.out.println(cache.get(<span class="string">"1"</span>));</div><div class="line">				</div><div class="line">				Thread.sleep(<span class="number">1000L</span>);</div><div class="line">				</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// cacheManager.close();</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2种方式都可以，xml配置文件比较灵活，但是要注意xml格式严格按<a href="http://www.ehcache.org/schema/ehcache-core.xsd" target="_blank" rel="external">http://www.ehcache.org/schema/ehcache-core.xsd</a> 书写。<br>注意节点的顺序<br>key-type<br>value-type<br>expiry<br>eviction-advisor<br>loader-writer<br>listeners<br>resources OR heap<br>more …</p>
<h2 id="其他注意事项"><a href="#其他注意事项" class="headerlink" title="其他注意事项"></a>其他注意事项</h2><p><offheap unit="MB">100</offheap> 配置了堆外缓存，value-type 类型要serializer 的对象，通过序列化，在调用的时候，就从堆外拿进jvm。<br>空间不足的话，要配置 -XX:MaxDirectMemorySize，比如tomcat -Xms128M -Xmx512M -XX:PermSize=64M -XX:MaxPermSize=128M,默认用的-Xmx 参数。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;常见的三种缓存技术ehcache,memcache,redis。ehcache的特点是快速，轻量，memcache,redis主要用在分布式集群场景。ehcache快的原因是提供了堆栈缓存，直接存在jvm，程序直接调用。&lt;br&gt;由于不同版本的使用方式不同，本文主要讲ehcache 3.4.0使用方式。&lt;br&gt;官网：&lt;a href=&quot;http://www.ehcache.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.ehcache.org/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Ehcache支持的数据存储&quot;&gt;&lt;a href=&quot;#Ehcache支持的数据存储&quot; class=&quot;headerlink&quot; title=&quot;Ehcache支持的数据存储&quot;&gt;&lt;/a&gt;Ehcache支持的数据存储&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;On-Heap Store - 利用Java的堆栈内存来存储缓存条目。该层使用与Java应用程序相同的堆内存，所有这些都必须由JVM垃圾回收器进行扫描。JVM使用的堆空间越多，应用程序性能将受到垃圾回收暂停的影响越多。这个非常快，但通常是最有限的存储资源。&lt;/li&gt;
&lt;li&gt;Off-Heap Store - 仅限可用的RAM限制。不受Java垃圾回收（GC）的约束。相当快，但比On-Heap Store慢，因为在存储和重新访问数据时，必须将数据移入和移出JVM堆。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="技术" scheme="http://aimigit.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="cache" scheme="http://aimigit.github.io/tags/cache/"/>
    
  </entry>
  
  <entry>
    <title>小米电视去广告</title>
    <link href="http://aimigit.github.io/2017/10/02/xiaomitv-adblock/"/>
    <id>http://aimigit.github.io/2017/10/02/xiaomitv-adblock/</id>
    <published>2017-10-02T13:57:12.000Z</published>
    <updated>2019-01-10T11:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概叙"><a href="#概叙" class="headerlink" title="概叙"></a>概叙</h2><p>小米系列的产品，刚开始主打发烧友，便宜又做工好，性价比高。陆陆续续买了不少小米的产品，主要考虑可以组网，做智能家居。<br>后面公司规模扩大，开始频繁投放广告，产品也变得平庸了。小米电视升级后，开机广告，暂停广告，关机也要广告，实在不能忍。<br>广告类型主要有2种，1个是电视平台的广告，开关机广告那些。另一个是视频播放里面的广告，类似优酷视频那种。<br>目前能去的是第一种，第二种会去的分享一下。</p>
<h2 id="去广告方法1"><a href="#去广告方法1" class="headerlink" title="去广告方法1"></a>去广告方法1</h2><p>家里路由器有网址屏蔽功能，直接把广告网址屏蔽，<br>“ad.xiaomi.com”,”ad1.xiaomi.com”,”ad.mi.com”添加进黑名单。<br>这个方式是从广告来源过滤，如果小米改了网址就失效了。</p>
<h2 id="方法2禁用广告app"><a href="#方法2禁用广告app" class="headerlink" title="方法2禁用广告app"></a>方法2禁用广告app</h2><a id="more"></a>
<p>动手能力强的，推荐用这种。直接连接电视，禁用广告相关app，但是不能乱杀，有开不了机的风险。<br>电视用的是android系统，可以理解为不能打电话的手机。我们不需要root。<br>准备2个软件</p>
<ul>
<li>电脑</li>
<li>adb工具</li>
<li><p>Debloater<br>在你的电脑安装以上2个软件，adb工具我直接用刷机精灵的adb命令行功能。</p>
</li>
<li><p>电脑和电视连接同一个路由，在同一个局域网。</p>
</li>
<li>查看电视的ip，比如192.168.1.5。</li>
<li>电视打开adb调试</li>
<li>电脑打开adb命令行,输入adb connnet 192.168.1.5，连接成功。</li>
<li>电脑打开Debloater，Read Device Packages，这时候可以看到所有安装的app</li>
<li>禁用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">com.miui.systemAdSolution  广告</div><div class="line">com.xiaomi.mitv.advertise  开屏广告</div><div class="line">com.xiaomi.mitv.assistant.manual</div><div class="line">com.xiaomi.mitv.tvpush.tvpushservice</div><div class="line">com.xiaomi.tv.appupgrade  应用升级</div><div class="line">com.xiaomi.mitv.upgrade  系统升级</div><div class="line">com.miui.cloudservice</div></pre></td></tr></table></figure>
<p>然后关机，重新开机，系统广告消息了，心情很爽，同事关闭了升级，不会被强制升级。<br>还能禁用更多，网上有精简列表，有兴趣的自行研究，千万不要禁用关键app，电视会启动不了。</p>
<h2 id="附录包名对应的app，系统版本不同，数量有差异"><a href="#附录包名对应的app，系统版本不同，数量有差异" class="headerlink" title="附录包名对应的app，系统版本不同，数量有差异"></a>附录包名对应的app，系统版本不同，数量有差异</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">package:/data/app/com.mitv.video-1.apk=com.mitv.video</div><div class="line">package:/data/app/com.xiaomi.mitv.payment-1.apk=com.xiaomi.mitv.payment</div><div class="line">package:/vendor/app/MiTVWifiDisplay.apk=com.xiaomi.mitv.wfd</div><div class="line">package:/system/priv-app/DefaultContainerService.apk=com.android.defcontainer</div><div class="line">package:/system/app/QuickSearchBox.apk=com.android.quicksearchbox</div><div class="line">package:/system/priv-app/Contacts.apk=com.android.contacts</div><div class="line">package:/system/priv-app/TeleService.apk=com.android.phone</div><div class="line">package:/system/app/HTMLViewer.apk=com.android.htmlviewer</div><div class="line">package:/vendor/app/SmartHomeTV.apk=com.xiaomi.smarthome.tv</div><div class="line">package:/system/app/Bluetooth.apk=com.android.bluetooth</div><div class="line">package:/system/priv-app/CalendarProvider.apk=com.android.providers.calendar</div><div class="line">package:/data/app/com.xiaomi.tv.gallery-2.apk=com.xiaomi.tv.gallery</div><div class="line">package:/vendor/app/MiTVService.apk=com.xiaomi.mitv.services</div><div class="line">package:/system/app/Browser.apk=com.android.browser</div><div class="line">package:/vendor/app/MiMusic2.apk=com.xiaomi.mimusic</div><div class="line">package:/vendor/app/MiTVUpgrade.apk=com.xiaomi.mitv.upgrade</div><div class="line">package:/vendor/app/PushService.apk=com.miui.cloudservice</div><div class="line">package:/vendor/app/MiTVPay.apk=com.xiaomi.mitv.pay</div><div class="line">package:/system/app/DownloadProviderUi.apk=com.android.providers.downloads.ui</div><div class="line">package:/system/app/DocumentsUI.apk=com.android.documentsui</div><div class="line">package:/system/priv-app/SharedStorageBackup.apk=com.android.sharedstoragebackup</div><div class="line">package:/vendor/app/DeviceReport.apk=com.xiaomi.devicereport</div><div class="line">package:/system/priv-app/VpnDialogs.apk=com.android.vpndialogs</div><div class="line">package:/vendor/app/jiajia-jianshenfang_T6.apk=com.jiajia.yundonghui.mitv</div><div class="line">package:/vendor/app/MiTVCommentService.apk=com.xiaomi.mitv.commentservice</div><div class="line">package:/system/app/Provision.apk=com.android.provision</div><div class="line">package:/vendor/app/MiTvGameCenter.apk=com.xiaomi.mibox.gamecenter</div><div class="line">package:/vendor/app/BaiduCloud.apk=com.baidu.tv.download</div><div class="line">package:/system/priv-app/MediaProvider.apk=com.android.providers.media</div><div class="line">package:/vendor/app/AppUpgrade.apk=com.xiaomi.tv.appupgrade</div><div class="line">package:/vendor/app/cm-sdk-release.apk=com.cleanmaster.sdk</div><div class="line">package:/system/app/CertInstaller.apk=com.android.certinstaller</div><div class="line">package:/vendor/app/DlnaTVService.apk=com.xiaomi.dlnatvservice</div><div class="line">package:/vendor/app/MiTVMediaExplorerDaemon.apk=com.xiaomi.mitv.media</div><div class="line">package:/system/app/TvService.apk=mitv.service</div><div class="line">package:/vendor/app/MiTVMultiCast.apk=com.hpplay.happyplay.aw.xm</div><div class="line">package:/vendor/app/MiGameCenterSDKService.apk=com.xiaomi.gamecenter.sdk.service.mibox</div><div class="line">package:/vendor/app/AirkanTVService.apk=com.duokan.airkan.tvbox</div><div class="line">package:/system/priv-app/Settings.apk=com.android.settings</div><div class="line">package:/vendor/app/MiTVSettingsProvider.apk=com.xiaomi.mitv.providers.settings</div><div class="line">package:/vendor/app/PhotoSlideShow.apk=com.duokan.application.photoviewer</div><div class="line">package:/data/app/com.android.packageinstaller-1.apk=com.android.packageinstaller</div><div class="line">package:/system/app/TelephonyProvider.apk=com.android.providers.telephony</div><div class="line">package:/vendor/app/UDTService.apk=com.xiaomi.milink.udt</div><div class="line">package:/system/app/PicoTts.apk=com.svox.pico</div><div class="line">package:/data/app/com.xiaomi.mitv.shop-1.apk=com.xiaomi.mitv.shop</div><div class="line">package:/vendor/app/MiTVSystemUI.apk=com.xiaomi.mitv.systemui</div><div class="line">package:/system/priv-app/FusedLocation.apk=com.android.location.fused</div><div class="line">package:/system/priv-app/BackupRestoreation.apk=com.android.backup</div><div class="line">package:/system/priv-app/SettingsProvider.apk=com.android.providers.settings</div><div class="line">package:/vendor/app/Mipay.apk=com.mipay.wallet.tv</div><div class="line">package:/system/priv-app/DownloadProvider.apk=com.android.providers.downloads</div><div class="line">package:/data/app/com.xiaomi.mitv.advertise-1.apk=com.xiaomi.mitv.advertise</div><div class="line">package:/system/app/SoundRecorder.apk=com.android.soundrecorder</div><div class="line">package:/vendor/app/MiBoxLockScreen.apk=com.xiaomi.mibox.lockscreen</div><div class="line">package:/system/app/LatinIME.apk=com.android.inputmethod.latin</div><div class="line">package:/system/priv-app/ProxyHandler.apk=com.android.proxyhandler</div><div class="line">package:/vendor/app/XMAccountManager.apk=com.xiaomi.account</div><div class="line">package:/vendor/app/TVPushService.apk=com.xiaomi.mitv.tvpush.tvpushservice</div><div class="line">package:/vendor/app/mitvmediaplayer.apk=com.xiaomi.mitv.player</div><div class="line">package:/vendor/app/XMAccountAuth.apk=com.xiaomi.account.auth</div><div class="line">package:/vendor/app/RemoteControllerService.apk=com.xiaomi.mitv.remotecontroller.service</div><div class="line">package:/vendor/app/CloudAlbum.apk=com.duokan.cloudalbum</div><div class="line">package:/data/app/com.xiaomi.tweather-1.apk=com.xiaomi.tweather</div><div class="line">package:/system/app/UserDictionaryProvider.apk=com.android.providers.userdictionary</div><div class="line">package:/system/app/Factory.apk=com.duokan.factorytest</div><div class="line">package:/vendor/app/MiTVPinyinIME.apk=com.android.inputmethod.pinyin</div><div class="line">package:/vendor/app/MiTVDesktop.apk=com.xiaomi.tv.desktop</div><div class="line">package:/vendor/app/MiTVMediaExplorer.apk=com.xiaomi.mitv.mediaexplorer</div><div class="line">package:/system/app/PacProcessor.apk=com.android.pacprocessor</div><div class="line">package:/data/app/com.xiaomi.voicecontrol-1.apk=com.xiaomi.voicecontrol</div><div class="line">package:/vendor/app/MiTVDownload.apk=com.xiaomi.mitv.download</div><div class="line">package:/system/framework/framework-res.apk=android</div><div class="line">package:/system/priv-app/ContactsProvider.apk=com.android.providers.contacts</div><div class="line">package:/system/priv-app/ExternalStorageProvider.apk=com.android.externalstorage</div><div class="line">package:/vendor/app/NameService.apk=com.xiaomi.tv.nameservice</div><div class="line">package:/system/app/BasicDreams.apk=com.android.dreams.basic</div><div class="line">package:/vendor/app/SystemUI_M8.apk=com.android.systemui</div><div class="line">package:/vendor/app/MiTVStat.apk=com.xiaomi.statistic</div><div class="line">package:/system/app/KeyChain.apk=com.android.keychain</div><div class="line">package:/vendor/app/MiTVUserView.apk=com.xiaomi.tv.mitvuser</div><div class="line">package:/system/app/MiTVSettings-new.apk=com.xiaomi.mitv.settings</div><div class="line">package:/system/app/TVCalendar.apk=com.xiaomi.mitv.calendar</div><div class="line">package:/data/app/com.xiaomi.mitv.assistant.manual-1.apk=com.xiaomi.mitv.assistant.manual</div><div class="line">package:/system/priv-app/Keyguard.apk=com.android.keyguard</div><div class="line">package:/vendor/app/BaiduInput.apk=com.baidu.input</div><div class="line">package:/data/app/com.xiaomi.mitv.appstore-2.apk=com.xiaomi.mitv.appstore</div><div class="line">package:/system/priv-app/Shell.apk=com.android.shell</div><div class="line">package:/vendor/app/XiaomiServiceFramework.apk=com.xiaomi.xmsf</div><div class="line">package:/data/app/com.xiaomi.mitv.tvmanager-2.apk=com.xiaomi.mitv.tvmanager</div><div class="line">package:/vendor/app/SearchCenter.apk=com.xiaomi.mitv.searchcenter</div><div class="line">package:/system/priv-app/CleanMasterTV.apk=com.cmcm.cleanmaster.tv</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概叙&quot;&gt;&lt;a href=&quot;#概叙&quot; class=&quot;headerlink&quot; title=&quot;概叙&quot;&gt;&lt;/a&gt;概叙&lt;/h2&gt;&lt;p&gt;小米系列的产品，刚开始主打发烧友，便宜又做工好，性价比高。陆陆续续买了不少小米的产品，主要考虑可以组网，做智能家居。&lt;br&gt;后面公司规模扩大，开始频繁投放广告，产品也变得平庸了。小米电视升级后，开机广告，暂停广告，关机也要广告，实在不能忍。&lt;br&gt;广告类型主要有2种，1个是电视平台的广告，开关机广告那些。另一个是视频播放里面的广告，类似优酷视频那种。&lt;br&gt;目前能去的是第一种，第二种会去的分享一下。&lt;/p&gt;
&lt;h2 id=&quot;去广告方法1&quot;&gt;&lt;a href=&quot;#去广告方法1&quot; class=&quot;headerlink&quot; title=&quot;去广告方法1&quot;&gt;&lt;/a&gt;去广告方法1&lt;/h2&gt;&lt;p&gt;家里路由器有网址屏蔽功能，直接把广告网址屏蔽，&lt;br&gt;“ad.xiaomi.com”,”ad1.xiaomi.com”,”ad.mi.com”添加进黑名单。&lt;br&gt;这个方式是从广告来源过滤，如果小米改了网址就失效了。&lt;/p&gt;
&lt;h2 id=&quot;方法2禁用广告app&quot;&gt;&lt;a href=&quot;#方法2禁用广告app&quot; class=&quot;headerlink&quot; title=&quot;方法2禁用广告app&quot;&gt;&lt;/a&gt;方法2禁用广告app&lt;/h2&gt;
    
    </summary>
    
    
      <category term="生活" scheme="http://aimigit.github.io/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="去广告" scheme="http://aimigit.github.io/tags/%E5%8E%BB%E5%B9%BF%E5%91%8A/"/>
    
  </entry>
  
</feed>
